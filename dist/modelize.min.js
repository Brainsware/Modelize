var $,RESTConnector,object_merge,bind=function(a,b){return function(){return a.apply(b,arguments)}};"function"==typeof require&&(object_merge=require("./lib/utils"),$=require("jquery"),window.jQuery=require("jquery"),require("../vendor/jquery.rest/dist/1/jquery.rest.min.js")),RESTConnector=function(){function a(a,b){var c;null==a&&(a="/api/"),null==b&&(b={}),this.init=bind(this.init,this),this.get=bind(this.get,this),c={stripTrailingSlash:!0,methodOverride:!0},b=object_merge(b,c),this.connector=new $.RestClient(a,b)}return a.prototype.get=function(a){return this.connector[a]},a.prototype.init=function(a,b){var c,d,e;null==b&&(b=[]),null==this.connector[a]&&this.connector.add(a),e=[];for(d in b)c=b[d],this.connector[a][d+"s"]?e.push(void 0):e.push(this.connector[a].add(d+"s"));return e},a}(),"undefined"!=typeof module&&null!==module&&(module.exports=RESTConnector);var Computed,Container,DelayedSave,Editable,HashedSave,MappedObservable,Observable,ObservableArray,Observables,PureComputed,ko;"function"==typeof require&&(ko=require("knockout"),Observables=require("./lib/observable"),Observable=Observables.Observable,ObservableArray=Observables.ObservableArray,MappedObservable=Observables.MappedObservable,Computed=Observables.Computed,PureComputed=Observables.PureComputed,Editable=require("./lib/editable"),DelayedSave=require("./lib/delayedsave"),HashedSave=require("./lib/hashedsave")),Container=function(a){var b;return null==a&&(a={}),b=function(b){var c,d,e,f,g,h,i,j,k;if(null==b&&(b={}),Observable(b,"__updated"),b.export=function(c){return function(){var c,d,e,f;if(c={},null!=a.editable){f=a.editable;for(d in f)e=f[d],c[e]=b[e]()}return c}}(this),b.editables=function(){var b;return b=[],null!=a.editable&&(b=a.editable),b},null!=a.selectable&&a.selectable===!0&&Selectable(b),null!=a.observable){f=a.observable;for(d in f)e=f[d],Observable(b,e)}if(null!=a.editable){g=a.editable;for(d in g)e=g[d],Editable(b,e,function(a){return function(){return b.__updated(b.export())}}(this))}if(null!=a.computed){h=a.computed;for(e in h)c=h[e],Computed(b,e,c)}if(null!=a.purecomputed){i=a.purecomputed;for(e in i)c=i[e],PureComputed(b,e,c)}if(null!=a.functions){j=a.functions;for(e in j)c=j[e],b[e]=c}if(null!=a.subscriptions){k=a.subscriptions;for(e in k){if(c=k[e],!ko.isObservable(b[e]))throw new Error("No observable to subscribe to found: "+e);b[e].subscribe(c)}}return b}},"undefined"!=typeof module&&null!==module&&(module.exports=Container);var CryptoHandler,SJCLUtils,ko,bind=function(a,b){return function(){return a.apply(b,arguments)}};"function"==typeof require&&(ko=require("knockout"),SJCLUtils=require("../lib/sjcl")),CryptoHandler=function(){function a(a){if(this.save=bind(this.save,this),this.load=bind(this.load,this),null==a.key)throw new Error("Please provide an encryption key to the crypto handler!");this.key=a.key,null!=a.salt&&(this.salt=a.salt)}return a.prototype.load=function(a){var b;return b=SJCLUtils.decryptData(this.key,a),JSON.parse(b)},a.prototype.save=function(a){return SJCLUtils.encryptData(this.key,ko.toJSON(a))},a}(),"undefined"!=typeof module&&null!==module&&(module.exports=CryptoHandler);var HashHandler,bind=function(a,b){return function(){return a.apply(b,arguments)}};HashHandler=function(){function a(a){if(this.save=bind(this.save,this),null==a.salt)throw new Error("Please provide a salting hash to the hash handler!");this.salt=a.salt}return a.prototype.save=function(a){return SJCLUtils.getHash(a+this.salt)},a}();var JSONHandler;JSONHandler=function(){function a(){}return a.prototype.load=function(a){return JSON.parse(a)},a.prototype.save=function(a){return JSON.stringify(a)},a}(),"undefined"!=typeof module&&null!==module&&(module.exports=JSONHandler);var Helpers;Helpers={relationship_fields:function(a,b,c,d){return null==d&&(d={}),[a+"_id",a+"s",a,window[b],c,d]},single_get_fn:function(a,b,c,d,e,f){return null==f&&(f={}),function(b){return function(e){var f;if(f=function(a){return b[c](d(a))},null!=e&&"undefined"==typeof e.push){if("function"!=typeof e)throw new Error("model.find 2nd parameter needs to be either a function or a pushable object (Array, ObservableArray).\nGiven: "+e);f=e}return d.get_one(b[a](),f)}}(this)},lazy_get_fn:function(a,b,c,d,e,f){var g;if("undefined"==typeof g||null===g)return g=function(a){return function(c){var e,f,g,h;for(h=[],e=0,f=c.length;e<f;e++)g=c[e],h.push(d(g));return a[b](h)}}(this),e[b].read(this.id).done(g)},lazy_single_get_fn:function(a,b,c,d,e,f){var g;if("function"!=typeof this[a])throw new Error("External key not an observable: "+a);if(null==this[a]())throw new Error("Tried to access empty relation key: "+a);if("function"==typeof this[a]())throw new Error("Circular referene? Quitting.");return"undefined"!=typeof g&&null!==g||(g=function(a){return function(a){}}(this),this[c](d(data))),d.get_one(this[a](),g)},get_fn:function(a,b,c,d,e,f){return null==f&&(f={}),function(a){return function(c,g){var h;if(null==c&&(c={}),h=function(c){var e,f,g,h;for(h=[],e=0,f=c.length;e<f;e++)g=c[e],h.push(d(g));return a[b](h)},null!=g&&"undefined"==typeof g.push){if("function"!=typeof g)throw new Error("model.find 2nd parameter needs to be either a function or a pushable object (Array, ObservableArray).\nGiven: "+g);h=g}if(null==e)throw new Error('No Connector found for resource "'+b+'" found: ',e);return null!=f.belongs_to&&f.belongs_to.length>0?e[b].read(f.belongs_to,a.id,c).done(h):e[b].read(a.id,c).done(h)}}(this)},create_fn:function(a,b,c,d,e,f){return function(a){return function(c,g){var h,i;if(null==c&&(c={}),h=function(c){var e;return e=d(c),null!=e.after_create&&e.after_create(),a[b].push(e)},null!=g&&(h=function(a){var b;return b=d(JSON.parse(JSON.stringify(a))),null!=b.after_create&&b.after_create(),g(a)}),null==a.id)throw new Error("Empty ID. Save parent model first!");if(i=d(c),null!=i.before_create&&i.before_create(),c=i.export(!1,!0),null==e)throw new Error('No Connector found for resource "'+b+'" found: ',e);return f.belongs_to.length>0?e[b].create(f.belongs_to,a.id,c).done(h):e[b].create(a.id,c).done(h)}}(this)},destroy_fn:function(a,b,c,d,e,f){return function(a){return function(c){if(null==c&&(c=function(c){return a[b].remove(element)}),null==a.id)throw new Error("Empty ID. Save parent model first!");return e=connector.get(b),null!=f.belongs_to?e[b].destroy(f.belongs_to,a.id,id).done(c):e[b].destroy(a.id,id).done(c)}}(this)}},"undefined"!=typeof module&&null!==module&&(module.exports=Helpers);var Containable,MappedObservable,Observable,ObservableArray,Observables,init_multi_container,init_single_container,ko;"function"==typeof require&&(ko=require("knockout"),Observables=require("./observable"),Observable=Observables.Observable,ObservableArray=Observables.ObservableArray,MappedObservable=Observables.MappedObservable),Containable=function(a,b){var c,d,e,f,g,h,i;h=b.container;for(g in h){if(i=h[g],c=window[g],null!=i.container&&(c=window[i.container]),null!=i.container&&"function"==typeof i.container&&(c=i.container),"function"!=typeof c)throw new Error('No container "'+g+'" found.');if(e=g.toLowerCase(),null!=i.field&&(e=i.field),"object"!=typeof i.datahandler)throw new Error('Invalid or no datahandler provided for: "'+g+'"',typeof i.datahandler);null!=i.datahandler&&(d=i.datahandler),f=!1,null!=i.first_class&&(f=i.first_class),null!=i.type&&"multi"===i.type?init_multi_container(a,g,d,c,e,b):init_single_container(a,g,d,c,e,f,b)}return a},init_single_container=function(a,b,c,d,e,f,g){var h,i,j,k,l;if(h={},null!=a[e]&&(h=c.load(a[e])),Observable(a,b,new d(h)),f===!0)for(l=a[b]().editables(),j=0,k=l.length;j<k;j++)i=l[j],MappedObservable(a,i,a[b](),a[i]);return a[b]().__updated.subscribe(function(b){return function(b){var d;return(d=DelayedSave.apply(a,[g,a,c]))(b,e)}}(this)),a[b].subscribe(function(d){return function(){var d;return(d=DelayedSave.apply(a,[g,a,c]))(a[b](),e)}}(this))},init_multi_container=function(a){return function(a,b,c,d,e,f){var g,h,i,j,k,l;if(h={},null!=a[e]&&(h=c.load(a[e])),k=[],null!=h)for(i=0,l=h.length;i<l;i++)j=h[i],g=new d(j),k.push(g),g.__updated.subscribe(function(){var d;return(d=DelayedSave.apply(a,[f,a,c]))(a[b](),e)});return ObservableArray(a,b,k),a[b+"_add"]=function(h,i){return null==h&&(h={}),g=d(h),null!=g.after_create&&g.after_create(),null!=g.before_create&&g.before_create(),null!=i&&i(g),h=g.export(!1,!0),a[b].push(g),g.__updated.subscribe(function(){return(i=DelayedSave.apply(a,[f,a,c]))(a[b](),e)})},a[b].subscribe(function(){var d;return(d=DelayedSave.apply(a,[f,a,c]))(a[b](),e)})}}(this),"undefined"!=typeof module&&null!==module&&(module.exports=Containable);var DelayedSave;DelayedSave=function(a,b,c){return null==c&&(c=null),function(d){return function(d,e,f){if(null==f&&(f=350),null!=b.id)return b[e]&&null!=b[e].editing&&b[e].editing("pending"),null==window.timeoutEditor&&(window.timeoutEditor={}),null==window.timeoutEditor[a.api+b.id]&&(window.timeoutEditor[a.api+b.id]={}),clearTimeout(window.timeoutEditor[a.api+b.id][e]),window.timeoutEditor[a.api+b.id][e]=setTimeout(function(){var a,f;if(b[e]&&null!=b[e].editing&&b[e].editing("success"),a={},a[e]=d,null!=c&&(a[e]=c.save(d)),f=b.update(a),null!=b.on_save_success&&f.done(b.on_save_success),null!=b.on_save_fail)return f.fail(b.on_save_fail)},f)}}(this)},"undefined"!=typeof module&&null!==module&&(module.exports=DelayedSave);var Editable,Observable,Observables,ko;"function"==typeof require&&(ko=require("knockout"),Observables=require("./observable"),Observable=Observables.Observable),Editable=function(a,b,c){return Observable(a,b),a[b].extend({editable:""}),a[b].subscribe(function(a){return function(a){var d;return d=c(a,b)}}(this)),a},ko.extenders.editable=function(a,b){return a.editing=ko.observable("default")},"undefined"!=typeof module&&null!==module&&(module.exports=Editable);var HashedSave;HashedSave=function(a,b){return function(a){return function(a,c){var d,e;if(null!=b.id&&(b[c]&&null!=b[c].editing&&b[c].editing("pending"),null!=b.hash_salt?a+=b.hash_salt:console.log("No salt for hash found. Intentional?"),d={},d[c]=SJCLUtils.getHash(a),e=b.update(d),null!=b.on_save_success&&e.done(b.on_save_success),null!=b.on_save_fail))return e.fail(b.on_save_fail)}}(this)},"undefined"!=typeof module&&null!==module&&(module.exports=HashedSave);var Computed,LazyObservable,LazyObservableArray,MappedObservable,Observable,ObservableArray,PureComputed,ko;"function"==typeof require&&(ko=require("knockout")),Observable=function(a,b,c){return void 0===c&&(c=a[b]),a[b]=ko.observable(c)},ObservableArray=function(a,b,c){return void 0===c&&(c=[]),a[b]=ko.observableArray(c),a[b].select=function(c){return ko.utils.arrayFilter(a[b].call(),c)},a[b].map=function(c){return ko.utils.arrayMap(a[b].call(),c)}},Computed=function(a,b,c){return a[b]=ko.computed(c,a)},PureComputed=function(a,b,c){return a[b]=ko.pureComputed(c,a)},MappedObservable=function(a,b,c,d){if(a[b]=ko.pureComputed({read:function(){return c[b]()},write:function(a){return c[b](a)},deferEvaluation:!0}),null!=d)return a[b](d)},LazyObservable=function(a,b,c,d,e,f){var g;return null==d&&(d=[]),null==e&&(e=null),null==f&&(f=!1),g=f?ko.observableArray(e):ko.observable(e),a[b]=ko.computed({read:function(){return a[b].loaded()===!1&&c.apply(a,d),g()},write:function(c){return a[b].loaded(!0),g(c)},deferEvaluation:!0}),f===!0&&(a[b].remove=function(a){return g.remove(a)},a[b].push=function(a){return g.push(a)},a[b].splice=function(a,b,c){return g.splice(a,b,c)}),a[b].loaded=ko.observable(!1),a[b].refresh=function(){return a[b].loaded(!1)}},LazyObservableArray=function(a,b,c,d,e){return null==d&&(d=[]),null==e&&(e=null),LazyObservable(a,b,c,d,e,!0)},"undefined"!=typeof module&&null!==module&&(module.exports={Observable:Observable,ObservableArray:ObservableArray,Computed:Computed,PureComputed:PureComputed,LazyObservable:LazyObservable});var Paginated;Paginated=function(a,b){if(null==a||null==b)throw new Error("Error: no object or options given");if("object"!=typeof a)throw new Error("Error: first parameter is not an object");if("function"==typeof b&&(b={method:b}),"object"!=typeof b)throw new Error("Invalid type for second parameter ("+typeof b+"), expected function or object");if(b=object_merge(b,{per_page:20,page:0}),b.page>0&&b.page--,!("number"==typeof b.per_page&&b.per_page>0))throw new Error("Invalid per_page value given");if(null==b.method)throw new Error("No reload method given");return Paginated.add_paginated_methods(a,b)},Paginated.add_paginated_methods=function(a,b){return Observable(a,"__collection",b.collection),Observable(a,"__reload",b.method),Observable(a,"__page",b.page),Observable(a,"per_page",b.per_page),Computed(a,"page",function(b){return function(){return a.__page()+1}}(this)),Computed(a,"count",function(b){return function(){return null!=a.__collection()?a.__collection().count:0}}(this)),Computed(a,"pages",function(b){return function(){var b;return b=parseInt(parseFloat(a.count())/parseFloat(a.__page())),parseFloat(a.count())%a.__page()>0&&b++,b}}(this)),a.first_page=function(b){return function(){return a.__page(0),a.__collection(a.__reload())}}(this),a.last_page=function(b){return function(){return a.__page(a.count()-1),a.__collection(a.__reload())}}(this),a.previous_page=function(b){return function(){if(a.page()>0)return a.__page(a.page()-1),a.__collection(a.__reload())}}(this),a.next_page=function(b){return function(){if(a.page()+1<a.pages())return a.__page(a.page()+1),a.__collection(a.__reload())}}(this)},"undefined"!=typeof module&&null!==module&&(module.exports=Paginated);var Helpers,Observable,ObservableArray,Observables,Relatable,object_merge,indexOf=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};"function"==typeof require&&(object_merge=require("./utils"),Helpers=require("../helpers"),Observables=require("./observable"),Observable=Observables.Observable,ObservableArray=Observables.ObservableArray),Relatable=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;if(null!=b.belongs_to?(null==b.has_one&&(b.has_one=[]),b.has_one=object_merge(b.belongs_to,b.has_one)):b.belongs_to=[],null!=b.has_one){j=b.has_one;for(i in j){if(c=j[i],object_merge(c,{model:i.capitalize()}),n=Helpers.relationship_fields(i,c.model,a.api(),b),d=window[c.model],null!=c.model&&"function"==typeof c.model&&(d=c.model),"function"!=typeof d)throw console.debug('Relation model for "'+i+'" not a function: ',d),new Error("No model for has_one/belongs_to relation found");"function"!=typeof a[i+"_id"]&&indexOf.call(b.belongs_to,i)<0&&(null==b.editable&&(b.editable=[]),k=i+"_id",indexOf.call(b.editable,k)<0&&b.editable.push(i+"_id")),null!=a[i]?Observable(a,i,new d(a[i])):Observable(a,i,new d),a[i+"_get"]=Helpers.single_get_fn.apply(a,n)}}if(null!=b.has_many){l=b.has_many,o=[];for(i in l){if(c=l[i],object_merge(c,{model:i.capitalize()}),n=Helpers.relationship_fields(i,c.model,a.api(),b),null!=a[i+"s"]){for(d=window[c.model],g=[],m=a[i+"s"],e=0,h=m.length;e<h;e++)f=m[e],g.push(new d(f));ObservableArray(a,i+"s",g)}else ObservableArray(a,i+"s",[]);a[i+"_get"]=Helpers.get_fn.apply(a,n),a[i+"_add"]=Helpers.create_fn.apply(a,n),o.push(a[i+"_destroy"]=Helpers.destroy_fn.apply(a,n))}return o}},"undefined"!=typeof module&&null!==module&&(module.exports=Relatable);var Selectable,ko;"function"==typeof require&&(ko=require("knockout")),Selectable=function(a){return a.selected=ko.observable(!1),a.select=function(b){return function(b,c){return a.selected(!a.selected())}}(this),a};var SJCLUtils,sjcl;"function"==typeof require&&(sjcl=require("sjcl")),SJCLUtils={generateKey:function(a,b){var c,d;if(""===a)throw new Error("Password for key generation empty!");return c=sjcl.codec.hex.fromBits,null==b&&(b=SJCLUtils.generateSalt()),d={salt:b,iter:5e3},d=sjcl.misc.cachedPbkdf2(a,d),sjcl.codec.hex.fromBits(d.key)},generateSalt:function(a){var b;return null==a&&(a=2),b=sjcl.random.randomWords(a),sjcl.codec.hex.fromBits(b)},encryptData:function(a,b,c){var d,e;if(null==c&&(c=""),""===a)throw new Error("Encryption key empty!");return d={mode:"gcm",iter:5e3,ts:64,ks:256,adata:c},e={},sjcl.encrypt(a,b,d,e)},decryptData:function(a,b){var c;if(""===a)throw new Error("Decryption key empty!");return c={},sjcl.decrypt(a,b,{},c)},getHash:function(a){var b;return null==a&&(console.debug("Hash value empty"),a=""),b=sjcl.hash.sha256.hash(a),sjcl.codec.hex.fromBits(b)}},"undefined"!=typeof module&&null!==module&&(module.exports=SJCLUtils);var Sortable;Sortable=function(a){return a.move=function(b){return function(b,c){return a.update({sort:b},c)}}(this),a.move_ui=function(a){return function(a){var b,c;return b=a.item,c=a.targetIndex,b.update({sort:c})}}(this),a};var object_merge;String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},object_merge=function(a,b){var c,d,e,f,g,h,i,j;for(j={},h=Object.keys(a),c=0,f=h.length;c<f;c++)e=h[c],j[e]=a[e];for(i=Object.keys(b),d=0,g=i.length;d<g;d++)e=i[d],null==a[e]&&(j[e]=b[e]);return j},"undefined"!=typeof module&&null!==module&&(module.exports=object_merge);var Computed,Containable,DelayedSave,Editable,HashedSave,Modelize,Observable,Observables,PureComputed,Relatable,SJCLUtils,ko,object_merge,indexOf=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};"function"==typeof require&&(ko=require("knockout"),object_merge=require("./lib/utils"),Observables=require("./lib/observable"),Observable=Observables.Observable,Computed=Observables.Computed,PureComputed=Observables.PureComputed,Relatable=require("./lib/relatable"),Containable=require("./lib/containable"),Editable=require("./lib/editable"),DelayedSave=require("./lib/delayedsave"),HashedSave=require("./lib/hashedsave"),SJCLUtils=require("./lib/sjcl")),Modelize=function(a){"use strict";var b,c,d;if(null==a.connector)throw new Error("No connector given for API URI: "+a.api);return d=[],null!=a.has_one&&(d=object_merge(d,a.has_one)),null!=a.has_many&&(d=object_merge(d,a.has_many)),a.connector.init(a.api,d),b=a.connector.get(a.api),c=function(c){var d,e,f,g,h,i,j,k,l;if(null==c&&(c={}),c.api=function(){return b},null!=a.hash_salt&&(c.hash_salt=a.hash_salt),null!=a.sortable&&a.sortable===!0&&Sortable(c),null!=a.selectable&&a.selectable===!0&&Selectable(c),null==a.has_one&&null==a.has_many&&null==a.belongs_to||Relatable(c,a),null!=a.container&&Containable(c,a),null!=a.observable){g=a.observable;for(e in g)f=g[e],Observable(c,f)}if(null!=a.editable){h=a.editable;for(e in h)f=h[e],Editable(c,f,DelayedSave.apply(c,[a,c]))}if(null!=a.hashed_index){i=a.hashed_index;for(e in i)f=i[e],Editable(c,f,HashedSave.apply(c,[a,c]))}if(null!=a.computed){j=a.computed;for(f in j)d=j[f],Computed(c,f,d)}if(null!=a.purecomputed){k=a.purecomputed;for(f in k)d=k[f],PureComputed(c,f,d)}if(null!=a.functions){l=a.functions;for(f in l)d=l[f],c[f]=d}return c.update=function(a){return function(a,b){if(null==c.id)throw new Error("Trying to update nonexisting model object");return c.api().update(c.id,a).done(b)}}(this),c.destroy=function(a){return function(a){if(null==c.id)throw new Error("Trying to delete nonexisting model object");return null!=c.onDestroy&&c.onDestroy(),c.api().destroy(c.id).done(a)}}(this),c.create=function(a){return function(a){return c.api().create(c.export(!1,!0)).done(function(b){return c.id=b.id,a()})}}(this),c.export=function(b){return function(b,d){var g,h,i,j,k,l,m,n,o,p,q;if(null==b&&(b=!1),null==d&&(d=!1),g={},b===!0&&(g.id=c.id),null!=a.editable){l=a.editable;for(e in l)f=l[e],g[f]=c[f]()}if(null!=a.belongs_to){m=a.belongs_to;for(f in m)i=m[f],g[f+"_id"]=c[f+"_id"]()}if(null!=a.container){n=a.container;for(f in n)if(p=n[f],d)h=f.toLowerCase(),null!=p.field&&(h=p.field),null!=p.datahandler&&(d=p.datahandler),null==p.datahandler&&(d=new JSONHandler),g[h]=d.save(c[f]());else if(Array.isArray(c[f]()))for(g[f]=[],o=c[f](),e=j=0,k=o.length;j<k;e=++j)q=o[e],g[f][e]=q.export();else g[f]=c[f]().export()}return g}}(this),c},c.get=function(d,e){var f,g,h;if(null==d&&(d={}),f=function(a){var b,d,f,g;for(g=[],b=0,d=a.length;b<d;b++)f=a[b],g.push(e.push(c(f)));return g},"undefined"==typeof e.push){if("function"!=typeof e)throw new Error("Collection.get 2nd parameter needs to be either a function or a pushable object (Array, ObservableArray).\nGiven: "+e);f=e}if("object"!=typeof d)throw new Error("Passed params is not an object: "+typeof d);if(null!=a.hashed_index&&null!=d){h="",null!=a.hash_salt&&(h=a.hash_salt);for(g in d)indexOf.call(a.hashed_index,g)>=0&&(d[g]=SJCLUtils.getHash(d[g]+h))}return null!=d&&null!=d.id?b.read(d.id,d).done(f):b.read(d).done(f)},c.get_one=function(a,b){var d;if(d=function(a){return b(c(a))},ko.isObservable(b)===!1){if("function"!=typeof b)throw new Error("Collection.get_one 2nd parameter needs to be either a function or an Observable.\nGiven: "+b);d=b}return c.get({id:a},d)},c.create=function(a,d){var e,f;if(null==a&&(a={}),e=function(a){return d.push(c(a))},"undefined"==typeof d.push){if("function"!=typeof d)throw new Error("Collection.create 2nd parameter needs to be either a function or a pushable object (Array, ObservableArray).\nGiven: "+d);e=function(a){return function(a){var b;return b=c(JSON.parse(JSON.stringify(a))),null!=b.after_create&&b.after_create(),d(a)}}(this)}return f=c(a),null!=f.before_create&&f.before_create(),a=f.export(!1,!0),b.create(a).done(e)},c},"undefined"!=typeof module&&null!==module&&(module.exports=Modelize);
//# sourceMappingURL=modelize.min.js.map