{"version":3,"file":"modelize.min.js","sources":["modelize/model.js","modelize/api.js","modelize/crypto.js","modelize/ham.js","modelize/helpers.js","modelize/lib/editable.js","modelize/lib/encryptable.js","modelize/lib/observable.js","modelize/lib/paginated.js","modelize/lib/selectable.js","modelize/lib/sortable.js"],"names":["add_apis_to","api","api_key","api_user","$","RestClient","stripTrailingSlash","methodOverride","username","password","sub_apis","main_api","data","name","results","push","add","decryptData","encryptData","generateKey","generateSalt","getHash","salt","hex","options","console","error","sjcl","codec","fromBits","iter","misc","cachedPbkdf2","key","length","rand","random","randomWords","adata","options_ret","mode","ts","ks","encrypt","decrypt","value","hash","debug","sha256","Ham","merge","a","b","i","j","len","len1","ref","ref1","result","Object","keys","module","exports","create_fn","destroy_fn","get_fn","lazy_get_fn","lazy_single_get_fn","relationship_fields","single_get_fn","update_fn","model","window","id_param","api_name","_this","params","callbackOrObservable","callback","m","res","belongs_to","read","id","done","this","getOne","instant","encrypted_container","encrypt_container","create","update","after_update","remove","element","destroy","DelayedSave","Editable","EncryptedDelayedSave","self","property","editing_property","Observable","subscribe","new_value","r","prop","delay","timeoutEditor","clearTimeout","setTimeout","edit_value","index","encrypted_editable","save_encrypted_container","Encryptable","indexOf","item","l","container","dencdata","sessionStorage","getItem","JSON","parse","enc_update","call","save_encrypted_encrypted_container","encdata","stringify","Computed","ComputedArray","LazyObservable","LazyObservableArray","ObservableArray","PureComputed","ko","require","initial_value","observable","observableArray","select","fn","utils","arrayFilter","map","arrayMap","computed","pureComputed","actual_property","property_fn","init_value","make_array","_value","loaded","apply","write","newValue","deferEvaluation","e","splice","args","refresh","Observables","Paginated","Error","method","per_page","page","add_paginated_methods","collection","__page","__collection","count","parseInt","parseFloat","first_page","__reload","last_page","previous_page","next_page","pages","Selectable","selected","Sortable","move","to","sort","move_ui","targetIndex","Modelize","mapi","has_one","has_many","items","ref2","ref3","ref4","ref5","ref6","ref7","ref8","ref9","relation_params","sortable","selectable","capitalize","editable","purecomputed","computed_array","functions","has_data","ref10","ref11","ref12","get","log","after_create"],"mappings":"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","sourcesContent":["'use strict';\nvar Modelize,\n  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\nModelize = function(options) {\n  var mapi, model;\n  if (api[options.api] == null) {\n    api.add(options.api);\n  }\n  mapi = api[options.api];\n  if (options.has_one != null) {\n    add_apis_to(options.has_one, options.api);\n  }\n  if (options.has_many != null) {\n    add_apis_to(options.has_many, options.api);\n  }\n  model = function(self) {\n    var data, fn, i, index, item, items, len, name, ref, ref1, ref2, ref3, ref4, ref5, ref6, ref7, ref8, ref9, relation_params;\n    if (self == null) {\n      self = {};\n    }\n    self.api = function() {\n      return mapi;\n    };\n    if (options.encrypted_container != null) {\n      Encryptable(self, options.encrypted_container, options.encrypted_editable);\n    }\n    if ((options.sortable != null) && options.sortable === true) {\n      Sortable(self);\n    }\n    if ((options.selectable != null) && options.selectable === true) {\n      Selectable(self);\n    }\n    if (options.belongs_to != null) {\n      if (options.has_one == null) {\n        options.has_one = [];\n      }\n      options.has_one = Ham.merge(options.belongs_to, options.has_one);\n    } else {\n      options.belongs_to = [];\n    }\n    if (options.has_one != null) {\n      ref = options.has_one;\n      for (name in ref) {\n        data = ref[name];\n        Ham.merge(data, {\n          model: name.capitalize()\n        });\n        relation_params = relationship_fields(name, data.model, options);\n        fn = window[data.model];\n        if (typeof self[name + '_id'] !== 'function' && indexOf.call(options.belongs_to, name) < 0) {\n          if (options.editable == null) {\n            options.editable = [];\n          }\n          options.editable.push(name + '_id');\n        }\n        if (self[name] != null) {\n          Observable(self, name, new fn(self[name]));\n        } else {\n          Observable(self, name, new fn());\n        }\n        self[name + '_get'] = single_get_fn.apply(self, relation_params);\n      }\n    }\n    if (options.has_many != null) {\n      ref1 = options.has_many;\n      for (name in ref1) {\n        data = ref1[name];\n        Ham.merge(data, {\n          model: name.capitalize()\n        });\n        relation_params = relationship_fields(name, data.model, options);\n        if (self[name + 's'] != null) {\n          fn = window[data.model];\n          items = [];\n          ref2 = self[name + 's'];\n          for (i = 0, len = ref2.length; i < len; i++) {\n            item = ref2[i];\n            items.push(new fn(item));\n          }\n          ObservableArray(self, name + 's', items);\n        } else {\n          ObservableArray(self, name + 's', []);\n        }\n        self[name + '_get'] = get_fn.apply(self, relation_params);\n        self[name + '_add'] = create_fn.apply(self, relation_params);\n        self[name + '_update'] = update_fn.apply(self, relation_params);\n        self[name + '_destroy'] = destroy_fn.apply(self, relation_params);\n      }\n    }\n    if (options.observable != null) {\n      ref3 = options.observable;\n      for (index in ref3) {\n        name = ref3[index];\n        Observable(self, name);\n      }\n    }\n    if (options.editable != null) {\n      ref4 = options.editable;\n      for (index in ref4) {\n        name = ref4[index];\n        Editable(self, name, DelayedSave.apply(self, [options, self]));\n      }\n    }\n    if (options.encrypted_editable != null) {\n      ref5 = options.encrypted_editable;\n      for (index in ref5) {\n        name = ref5[index];\n        Editable(self, name, EncryptedDelayedSave.apply(self, [options, self]));\n      }\n    }\n    if (options.computed != null) {\n      ref6 = options.computed;\n      for (name in ref6) {\n        fn = ref6[name];\n        Computed(self, name, fn);\n      }\n    }\n    if (options.purecomputed != null) {\n      ref7 = options.purecomputed;\n      for (name in ref7) {\n        fn = ref7[name];\n        PureComputed(self, name, fn);\n      }\n    }\n    if (options.computed_array != null) {\n      ref8 = options.computed_array;\n      for (name in ref8) {\n        fn = ref8[name];\n        ComputedArray(self, name, fn);\n      }\n    }\n    if (options.functions != null) {\n      ref9 = options.functions;\n      for (name in ref9) {\n        fn = ref9[name];\n        self[name] = fn;\n      }\n    }\n    self.update = (function(_this) {\n      return function(params, callback) {\n        if (self.id == null) {\n          console.error('Trying to update nonexisting model object');\n          return false;\n        }\n        return self.api().update(self.id, params).done(callback);\n      };\n    })(this);\n    self.destroy = (function(_this) {\n      return function(callback) {\n        if (self.id == null) {\n          console.error('Trying to delete nonexisting model object');\n          return false;\n        }\n        return self.api().destroy(self.id).done(callback);\n      };\n    })(this);\n    self.create = (function(_this) {\n      return function(callback) {\n        return mapi.create(self[\"export\"]()).done(function(data) {\n          self.id = data.id;\n          if (options.encrypted_container != null) {\n            self.enc_update(data);\n          }\n          return callback();\n        });\n      };\n    })(this);\n    self[\"export\"] = (function(_this) {\n      return function() {\n        var has_data, ref10, ref11, ref12;\n        data = {};\n        if (options.editable != null) {\n          ref10 = options.editable;\n          for (index in ref10) {\n            name = ref10[index];\n            data[name] = self[name]();\n          }\n        }\n        if (options.encrypted_editable != null) {\n          ref11 = options.encrypted_editable;\n          for (index in ref11) {\n            name = ref11[index];\n            data[name] = self[name]();\n          }\n        }\n        if (options.belongs_to != null) {\n          ref12 = options.belongs_to;\n          for (name in ref12) {\n            has_data = ref12[name];\n            data[name + '_id'] = self[name + '_id'];\n          }\n        }\n        return data;\n      };\n    })(this);\n    return self;\n  };\n\n  /*\n   * These are the collector functions and are not bound to a specific object but to the model\n   */\n  model.get = function(params, callbackOrObservable) {\n    var callback;\n    if (params == null) {\n      params = {};\n    }\n    callback = function(data) {\n      var i, len, m, results;\n      results = [];\n      for (i = 0, len = data.length; i < len; i++) {\n        m = data[i];\n        results.push(callbackOrObservable.push(model(m)));\n      }\n      return results;\n    };\n    if (typeof callbackOrObservable['push'] === 'undefined') {\n      if (typeof callbackOrObservable !== 'function') {\n        console.log('model.get 2nd parameter needs to be either a function or a pushable object (Array, ObservableArray).\\nGiven:');\n        console.log(callbackOrObservable);\n      }\n      callback = callbackOrObservable;\n    }\n    if (typeof params !== 'object') {\n      console.error(params, typeof params);\n      return;\n    }\n    if ((params != null) && (params.id != null)) {\n      return mapi.read(params.id, params).done(callback);\n    } else {\n      return mapi.read(params).done(callback);\n    }\n  };\n  model.getOne = function(id, observable) {\n    return model.get({\n      id: id\n    }, observable);\n  };\n  model.create = function(params, callbackOrObservable) {\n    var callback;\n    if (params == null) {\n      params = {};\n    }\n    callback = function(data) {\n      return callbackOrObservable.push(model(data));\n    };\n    if (typeof callbackOrObservable['push'] === 'undefined') {\n      if (typeof callbackOrObservable !== 'function') {\n        console.log('model.create 2nd parameter needs to be either a function or a pushable object (Array, ObservableArray).\\nGiven:');\n        console.log(callbackOrObservable);\n      }\n      callback = (function(_this) {\n        return function(data) {\n          var m;\n          m = model(JSON.parse(JSON.stringify(data)));\n          if (m.after_create != null) {\n            m.after_create();\n          }\n          return callbackOrObservable(data);\n        };\n      })(this);\n    }\n    if (params.length > 0 || typeof params === 'object') {\n      if (model.encrypted_container != null) {\n        params = model.encrypt_container(params);\n      }\n      return mapi.create(params).done(callback);\n    } else {\n      return mapi.create().done(callback);\n    }\n  };\n  if (options.encrypted_container != null) {\n    model.encrypted_container = options.encrypted_container;\n  }\n  if (options.encrypted_editable != null) {\n    model.encrypted_editable = options.encrypted_editable;\n  }\n  model.encrypt_container = function(data, container) {\n    var encdata, index, value;\n    data[model.encrypted_container] = {};\n    for (index in data) {\n      value = data[index];\n      if (indexOf.call(model.encrypted_editable, index) >= 0) {\n        data[model.encrypted_container][index] = value;\n      }\n    }\n    encdata = encryptData(sessionStorage.getItem('appKey'), JSON.stringify(data[model.encrypted_container]));\n    data[model.encrypted_container] = encdata;\n    return data;\n  };\n  return model;\n};\n\n//# sourceMappingURL=model.js.map\n","var add_apis_to, api, api_key, api_user;\n\nif (typeof api_user === \"undefined\" || api_user === null) {\n  api_user = '';\n}\n\nif (typeof api_key === \"undefined\" || api_key === null) {\n  api_key = '';\n}\n\napi = new $.RestClient('/api/', {\n  stripTrailingSlash: true,\n  methodOverride: true,\n  username: api_user,\n  password: api_key\n});\n\nadd_apis_to = function(sub_apis, main_api) {\n  var data, name, results;\n  results = [];\n  for (name in sub_apis) {\n    data = sub_apis[name];\n    if (!api[main_api][name + 's']) {\n      results.push(api[main_api].add(name + 's'));\n    } else {\n      results.push(void 0);\n    }\n  }\n  return results;\n};\n\n//# sourceMappingURL=api.js.map\n","var decryptData, encryptData, generateKey, generateSalt, getHash;\n\ngenerateKey = function(password, salt) {\n  var hex, options;\n  if (password === '') {\n    console.error('Password for key generation empty!');\n    return false;\n  }\n  hex = sjcl.codec.hex.fromBits;\n  if (salt == null) {\n    salt = generateSalt();\n  }\n  options = {\n    salt: salt,\n    iter: 5000\n  };\n  options = sjcl.misc.cachedPbkdf2(password, options);\n  return sjcl.codec.hex.fromBits(options.key);\n};\n\ngenerateSalt = function(length) {\n  var rand;\n  if (length == null) {\n    length = 2;\n  }\n  rand = sjcl.random.randomWords(length);\n  return sjcl.codec.hex.fromBits(rand);\n};\n\nencryptData = function(key, data, adata) {\n  var options, options_ret;\n  if (adata == null) {\n    adata = '';\n  }\n  if (key === '') {\n    console.error('Encryption key empty!');\n    return false;\n  }\n  options = {\n    mode: 'gcm',\n    iter: 5000,\n    ts: 64,\n    ks: 256,\n    adata: adata\n  };\n  options_ret = {};\n  return sjcl.encrypt(key, data, options, options_ret);\n};\n\ndecryptData = function(key, data) {\n  var options_ret;\n  if (key === '') {\n    console.error('Decryption key empty!');\n    return false;\n  }\n  options_ret = {};\n  return sjcl.decrypt(key, data, {}, options_ret);\n};\n\ngetHash = function(value) {\n  var hash;\n  if (value == null) {\n    console.debug('Hash value empty');\n    value = '';\n  }\n  hash = sjcl.hash.sha256.hash(value);\n  return sjcl.codec.hex.fromBits(hash);\n};\n\n//# sourceMappingURL=crypto.js.map\n","var Ham;\n\nHam = function() {};\n\nHam.merge = function(a, b) {\n  var i, j, key, len, len1, ref, ref1, result;\n  result = {};\n  ref = Object.keys(a);\n  for (i = 0, len = ref.length; i < len; i++) {\n    key = ref[i];\n    result[key] = a[key];\n  }\n  ref1 = Object.keys(b);\n  for (j = 0, len1 = ref1.length; j < len1; j++) {\n    key = ref1[j];\n    if (a[key] == null) {\n      result[key] = b[key];\n    }\n  }\n  return result;\n};\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = Ham;\n}\n\n//# sourceMappingURL=ham.js.map\n","var create_fn, destroy_fn, get_fn, lazy_get_fn, lazy_single_get_fn, relationship_fields, single_get_fn, update_fn;\n\nrelationship_fields = function(name, model, options) {\n  if (options == null) {\n    options = {};\n  }\n  return [name + '_id', name + 's', name, window[model], options];\n};\n\nget_fn = function(id_param, api_name, name, model, options) {\n  if (options == null) {\n    options = {};\n  }\n  return (function(_this) {\n    return function(params, callbackOrObservable) {\n      var callback;\n      if (params == null) {\n        params = {};\n      }\n      callback = function(data) {\n        var i, len, m, res;\n        res = [];\n        for (i = 0, len = data.length; i < len; i++) {\n          m = data[i];\n          res.push(model(m));\n        }\n        return _this[api_name](res);\n      };\n      if (typeof callbackOrObservable['push'] === 'undefined') {\n        if (typeof callbackOrObservable !== 'function') {\n          console.error('Collection.find 2nd parameter needs to be either a function or a pushable object (Array, ObservableArray).\\nGiven:');\n          console.error(callbackOrObservable);\n        }\n        callback = callbackOrObservable;\n      }\n      if (options.belongs_to != null) {\n        return _this.api()[api_name].read(options.belongs_to, _this.id, params).done(callback);\n      } else {\n        return _this.api()[api_name].read(_this.id, params).done(callback);\n      }\n    };\n  })(this);\n};\n\nsingle_get_fn = function(id_param, api_name, name, model, options) {\n  if (options == null) {\n    options = {};\n  }\n  return (function(_this) {\n    return function(params, callbackOrObservable) {\n      var callback;\n      if (params == null) {\n        params = {};\n      }\n      callback = function(data) {\n        return _this[name](model(data));\n      };\n\n      /*if typeof callbackOrObservable == 'undefined' and typeof callbackOrObservable['push'] == 'undefined'\n        if typeof callbackOrObservable != 'function'\n          console.error 'Collection.find 2nd parameter needs to be either a function or a pushable object (Array, ObservableArray).\\nGiven:'\n          console.error callbackOrObservable\n      \n        callback = callbackOrObservable\n       */\n      return model.getOne(_this[id_param](), callback);\n    };\n  })(this);\n};\n\nlazy_get_fn = function(id_param, api_name, name, model, options) {\n  var callback;\n  if (typeof callback === \"undefined\" || callback === null) {\n    callback = (function(_this) {\n      return function(data) {\n        var i, len, m, res;\n        res = [];\n        for (i = 0, len = data.length; i < len; i++) {\n          m = data[i];\n          res.push(model(m));\n        }\n        return _this[api_name](res);\n      };\n    })(this);\n    return this.api()[api_name].read(this.id).done(callback);\n  }\n};\n\nlazy_single_get_fn = function(id_param, api_name, name, model, options) {\n  var callback;\n  if (typeof this[id_param] !== 'function') {\n    console.error('External key not an observable: ' + id_param);\n    return false;\n  }\n  if (this[id_param]() == null) {\n    console.error('Tried to access empty relation key: ' + id_param);\n    return false;\n  }\n  if (typeof this[id_param]() === 'function') {\n    console.error('Circular referene? Quitting.');\n    return false;\n  }\n  if (typeof callback === \"undefined\" || callback === null) {\n    callback = (function(_this) {\n      return function(data) {\n        return _this[name](model(data));\n      };\n    })(this);\n  }\n  return model.getOne(this[id_param](), callback);\n};\n\ncreate_fn = function(id_param, api_name, name, model, options) {\n  return (function(_this) {\n    return function(params, callback, instant) {\n      if (params == null) {\n        params = {};\n      }\n      if (instant == null) {\n        instant = false;\n      }\n      if (callback == null) {\n        callback = function(data) {\n          return _this[api_name].push(model(data));\n        };\n      }\n      if (_this.id == null) {\n        console.error('Empty ID. Save parent model first!');\n        return;\n      }\n      if (model.encrypted_container != null) {\n        params = model.encrypt_container(params);\n      }\n      if (options.belongs_to.length > 0) {\n        return _this.api()[api_name].create(options.belongs_to, _this.id, params).done(callback);\n      } else {\n        return _this.api()[api_name].create(_this.id, params).done(callback);\n      }\n    };\n  })(this);\n};\n\nupdate_fn = function(id_param, api_name, name, model, options) {\n  return (function(_this) {\n    return function(id, params, callback) {\n      if (_this.id == null) {\n        console.error('Empty ID. Save parent model first!');\n        return;\n      }\n      if (model.encrypted_container != null) {\n        params = model.encrypt_container(params);\n      }\n      if (options.belongs_to != null) {\n        _this.api()[api_name].update(options.belongs_to, _this.id, id, params).done(callback);\n      } else {\n        _this.api()[api_name].update(_this.id, id, params).done(callback);\n      }\n      if (_this.after_update != null) {\n        return _this.after_update();\n      }\n    };\n  })(this);\n};\n\ndestroy_fn = function(id_param, api_name, name, model, options) {\n  return (function(_this) {\n    return function(id, callback) {\n      if (callback == null) {\n        callback = function(data) {\n          return _this[api_name].remove(element);\n        };\n      }\n      if (_this.id == null) {\n        console.error('Empty ID. Save parent model first!');\n        return;\n      }\n      if (options.belongs_to != null) {\n        return _this.api()[api_name].destroy(options.belongs_to, _this.id, id).done(callback);\n      } else {\n        return _this.api()[api_name].destroy(_this.id, id).done(callback);\n      }\n    };\n  })(this);\n};\n\n//# sourceMappingURL=helpers.js.map\n","var DelayedSave, Editable, EncryptedDelayedSave;\n\nEditable = function(self, property, callback) {\n  var editing_property;\n  editing_property = 'editing_' + property;\n  Observable(self, property);\n  if (typeof self[property] !== 'function') {\n    console.error('Editable field \"' + property + '\" is not a valid Observable');\n    return false;\n  }\n  Observable(self, editing_property, 0);\n  self[property].subscribe((function(_this) {\n    return function(new_value) {\n      var r;\n      return r = callback(new_value, property);\n    };\n  })(this));\n  return self;\n};\n\nDelayedSave = function(options, self) {\n  return (function(_this) {\n    return function(value, prop, delay) {\n      if (delay == null) {\n        delay = 250;\n      }\n      if (self.id != null) {\n        if (self['editing_' + prop] != null) {\n          self['editing_' + prop](1);\n        }\n        if (window.timeoutEditor == null) {\n          window.timeoutEditor = {};\n        }\n        if (window.timeoutEditor[options.api + self.id] == null) {\n          window.timeoutEditor[options.api + self.id] = {};\n        }\n        clearTimeout(window.timeoutEditor[options.api + self.id][prop]);\n        return window.timeoutEditor[options.api + self.id][prop] = setTimeout(function() {\n          var edit_value;\n          if (self['editing_' + prop] != null) {\n            self['editing_' + prop](2);\n          }\n          edit_value = {};\n          edit_value[prop] = value;\n          return self.update(edit_value);\n        }, delay);\n      }\n    };\n  })(this);\n};\n\nEncryptedDelayedSave = function(options, self) {\n  return (function(_this) {\n    return function(value, prop, delay) {\n      var index, name, ref;\n      if (delay == null) {\n        delay = 250;\n      }\n      if (typeof self[options.encrypted_container] !== 'object' || self[options.encrypted_container] === null) {\n        self[options.encrypted_container] = {};\n        ref = options.encrypted_editable;\n        for (index in ref) {\n          name = ref[index];\n          self[options.encrypted_container][name] = self[name]();\n        }\n      }\n      self[options.encrypted_container][prop] = value;\n      if (self.id != null) {\n        self['editing_' + prop](1);\n        if (window.timeoutEditor == null) {\n          window.timeoutEditor = {};\n        }\n        clearTimeout(window.timeoutEditor[options.api + self.id]);\n        return window.timeoutEditor[options.api + self.id] = setTimeout(function() {\n          var edit_value;\n          self.save_encrypted_container();\n          self['editing_' + prop](2);\n          edit_value = {};\n          edit_value[prop] = value;\n          return self.update(edit_value);\n        }, delay);\n      }\n    };\n  })(this);\n};\n\n//# sourceMappingURL=editable.js.map\n","var Encryptable,\n  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\nEncryptable = function(self, encrypted_container, encrypted_editable) {\n  var container, i, len;\n  self.decrypt = (function(_this) {\n    return function(encrypted_container) {\n      var dencdata, index, results, value;\n      if (typeof encrypted_container === 'string' && encrypted_container !== null && encrypted_container !== '') {\n        dencdata = decryptData(sessionStorage.getItem('appKey'), encrypted_container);\n        encrypted_container = JSON.parse(dencdata);\n        results = [];\n        for (index in encrypted_container) {\n          value = encrypted_container[index];\n          results.push(self[index] = value);\n        }\n        return results;\n      }\n    };\n  })(this);\n  if (typeof encrypted_container === 'string') {\n    self.decrypt(self[encrypted_container]);\n  } else if (typeof encrypted_container === 'object') {\n    for (i = 0, len = encrypted_container.length; i < len; i++) {\n      container = encrypted_container[i];\n      self.decrypt(self[container]);\n    }\n  }\n  self.enc_update = (function(_this) {\n    return function(data, callback) {\n      var index, value;\n      for (index in data) {\n        value = data[index];\n        if (indexOf.call(encrypted_editable, index) >= 0) {\n          if (typeof self[encrypted_container] !== 'object' || self[encrypted_container] === null) {\n            self[encrypted_container] = {};\n          }\n          self[encrypted_container][index] = value;\n        }\n      }\n      self.save_encrypted_encrypted_container();\n      if (callback != null) {\n        return callback();\n      }\n    };\n  })(this);\n  self.save_encrypted_container = (function(_this) {\n    return function() {\n      var edit_value, encdata;\n      encdata = encryptData(sessionStorage.getItem('appKey'), JSON.stringify(self[encrypted_container]));\n      edit_value = {};\n      edit_value[encrypted_container] = encdata;\n      return self.update(edit_value);\n    };\n  })(this);\n  return self;\n};\n\n//# sourceMappingURL=encryptable.js.map\n","var Computed, ComputedArray, LazyObservable, LazyObservableArray, Observable, ObservableArray, PureComputed, ko;\n\nif (typeof require !== \"undefined\" && require !== null) {\n  ko = require('../../../knockout/build/output/knockout-latest.debug');\n}\n\nObservable = function(self, property, initial_value) {\n  if (initial_value === void 0) {\n    initial_value = self[property];\n  }\n  return self[property] = ko.observable(initial_value);\n};\n\nObservableArray = function(self, property, initial_value) {\n  if (initial_value === void 0) {\n    initial_value = [];\n  }\n  self[property] = ko.observableArray(initial_value);\n  self[property].select = function(fn) {\n    return ko.utils.arrayFilter(self[property].call(), fn);\n  };\n  return self[property].map = function(fn) {\n    return ko.utils.arrayMap(self[property].call(), fn);\n  };\n};\n\nComputed = function(self, property, fn) {\n  return self[property] = ko.computed(fn, self);\n};\n\nPureComputed = function(self, property, fn) {\n  return self[property] = ko.pureComputed(fn, self);\n};\n\nComputedArray = function(self, property, fn) {\n  var actual_property, property_fn;\n  actual_property = '_actual_' + property;\n  property_fn = '_' + property;\n  ObservableArray(self, actual_property);\n  self[property_fn] = (function(_this) {\n    return function() {\n      self[actual_property](fn());\n      return self[actual_property]();\n    };\n  })(this);\n  return self[property] = ko.computed(self[property_fn]);\n};\n\nLazyObservable = function(self, property, callback, params, init_value, make_array) {\n  var _value;\n  if (params == null) {\n    params = [];\n  }\n  if (init_value == null) {\n    init_value = null;\n  }\n  if (make_array == null) {\n    make_array = false;\n  }\n  if (!make_array) {\n    _value = ko.observable(init_value);\n  } else {\n    _value = ko.observableArray(init_value);\n  }\n  self[property] = ko.computed({\n    read: function() {\n      if (self[property].loaded() === false) {\n        console.debug('LazyLoading property', property);\n        callback.apply(self, params);\n      }\n      return _value();\n    },\n    write: function(newValue) {\n      self[property].loaded(true);\n      return _value(newValue);\n    },\n    deferEvaluation: true\n  });\n  if (make_array === true) {\n    self[property].remove = function(e) {\n      return _value.remove(e);\n    };\n    self[property].push = function(e) {\n      return _value.push(e);\n    };\n    self[property].splice = function(e, i, args) {\n      return _value.splice(e, i, args);\n    };\n  }\n  self[property].loaded = ko.observable(false);\n  return self[property].refresh = function() {\n    return self[property].loaded(false);\n  };\n};\n\nLazyObservableArray = function(self, property, callback, params, init_value) {\n  if (params == null) {\n    params = [];\n  }\n  if (init_value == null) {\n    init_value = null;\n  }\n  return LazyObservable(self, property, callback, params, init_value, true);\n};\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = {\n    Observable: Observable,\n    ObservableArray: ObservableArray,\n    Computed: Computed,\n    ComputedArray: ComputedArray,\n    LazyObservable: LazyObservable\n  };\n}\n\n//# sourceMappingURL=observable.js.map\n","var Computed, Ham, Observable, Observables, Paginated;\n\nif (typeof require !== \"undefined\" && require !== null) {\n  Ham = require('../ham');\n  Observables = require('../lib/observable');\n  Observable = Observables.Observable;\n  Computed = Observables.Computed;\n}\n\nPaginated = function(self, options) {\n  if (!((self != null) && (options != null))) {\n    throw new Error('Error: no object or options given');\n  }\n  if ('object' !== typeof self) {\n    throw new Error('Error: first parameter is not an object');\n  }\n  if ('function' === typeof options) {\n    options = {\n      method: options\n    };\n  }\n  if ('object' !== typeof options) {\n    throw new Error('Invalid type for second parameter (' + typeof options + '), expected function or object');\n  }\n  options = Ham.merge(options, {\n    per_page: 20,\n    page: 0\n  });\n  if (options.page > 0) {\n    options.page--;\n  }\n  if (!(typeof options.per_page === 'number' && options.per_page > 0)) {\n    throw new Error('Invalid per_page value given');\n  }\n  if (options.method == null) {\n    throw new Error('No reload method given');\n  }\n  return Paginated.add_paginated_methods(self, options);\n};\n\nPaginated.add_paginated_methods = function(self, options) {\n  Observable(self, '__collection', options.collection);\n  Observable(self, '__reload', options.method);\n  Observable(self, '__page', options.page);\n  Observable(self, 'per_page', options.per_page);\n  Computed(self, 'page', (function(_this) {\n    return function() {\n      return self.__page() + 1;\n    };\n  })(this));\n  Computed(self, 'count', (function(_this) {\n    return function() {\n      if (self.__collection() != null) {\n        return self.__collection().count;\n      }\n      return 0;\n    };\n  })(this));\n  Computed(self, 'pages', (function(_this) {\n    return function() {\n      var result;\n      result = parseInt(parseFloat(self.count()) / parseFloat(self.__page()));\n      if (parseFloat(self.count()) % self.__page() > 0) {\n        result++;\n      }\n      return result;\n    };\n  })(this));\n  self.first_page = (function(_this) {\n    return function() {\n      self.__page(0);\n      return self.__collection(self.__reload());\n    };\n  })(this);\n  self.last_page = (function(_this) {\n    return function() {\n      self.__page(self.count() - 1);\n      return self.__collection(self.__reload());\n    };\n  })(this);\n  self.previous_page = (function(_this) {\n    return function() {\n      if (!(self.page() > 0)) {\n        return;\n      }\n      self.__page(self.page() - 1);\n      return self.__collection(self.__reload());\n    };\n  })(this);\n  return self.next_page = (function(_this) {\n    return function() {\n      if (!(self.page() + 1 < self.pages())) {\n        return;\n      }\n      self.__page(self.page() + 1);\n      return self.__collection(self.__reload());\n    };\n  })(this);\n};\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = Paginated;\n}\n\n//# sourceMappingURL=paginated.js.map\n","var Selectable;\n\nSelectable = function(self) {\n  self.selected = ko.observable(false);\n  self.select = (function(_this) {\n    return function(item, element) {\n      return self.selected(!self.selected());\n    };\n  })(this);\n  return self;\n};\n\n//# sourceMappingURL=selectable.js.map\n","var Sortable;\n\nSortable = function(self) {\n  self.move = (function(_this) {\n    return function(to, callback) {\n      return self.update({\n        sort: to\n      }, callback);\n    };\n  })(this);\n  self.move_ui = (function(_this) {\n    return function(element) {\n      var item, to;\n      item = element.item;\n      to = element.targetIndex;\n      return item.update({\n        sort: to\n      });\n    };\n  })(this);\n  return self;\n};\n\n//# sourceMappingURL=sortable.js.map\n"]}