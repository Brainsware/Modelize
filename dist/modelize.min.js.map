{"version":3,"file":"modelize.min.js","sources":["modelize/connector.js","modelize/container.js","modelize/crypto.js","modelize/datahandlers/crypto.js","modelize/datahandlers/hash.js","modelize/datahandlers/json.js","modelize/datahandlers/webcrypto.js","modelize/ham.js","modelize/helpers.js","modelize/lib/containable.js","modelize/lib/crypto.js","modelize/lib/delayedsave.js","modelize/lib/editable.js","modelize/lib/encryptable.js","modelize/lib/hashedsave.js","modelize/lib/observable.js","modelize/lib/paginated.js","modelize/lib/relatable.js","modelize/lib/selectable.js","modelize/lib/sjcl.js","modelize/lib/sortable.js","modelize/lib/utils.js","modelize/lib/webcrypto.js","modelize/model.js"],"names":["$","RESTConnector","object_merge","bind","fn","me","apply","arguments","require","window","jQuery","base","settings","default_settings","this","init","get","stripTrailingSlash","methodOverride","connector","RestClient","prototype","base_uri","resource","sub_resources","data","name","results","add","push","module","exports","Container","options","container","self","index","ref","ref1","ref2","ref3","ref4","Observable","editables","editable","selectable","Selectable","observable","Editable","_this","__updated","computed","Computed","purecomputed","PureComputed","functions","ref5","decryptData","encryptData","generateKey","generateSalt","getHash","password","salt","hex","Error","sjcl","codec","fromBits","iter","misc","cachedPbkdf2","key","length","rand","random","randomWords","adata","options_ret","mode","ts","ks","encrypt","decrypt","value","hash","console","debug","sha256","CryptoHandler","SJCLUtils","ko","save","load","decrypted_data","JSON","parse","toJSON","HashHandler","JSONHandler","stringify","WebCryptoHandler","Ham","merge","a","b","i","j","len","len1","result","Object","keys","Helpers","relationship_fields","model","single_get_fn","id_param","api_name","api","callbackOrObservable","callback","get_one","lazy_get_fn","m","res","read","id","done","lazy_single_get_fn","get_fn","params","belongs_to","create_fn","after_create","before_create","create","destroy_fn","remove","element","destroy","Containable","init_multi_container","init_single_container","container_fn","datahandler","field","first_class","toLowerCase","type","MappedObservable","subscribe","DelayedSave","c","item","items","ObservableArray","getSHA256","hexHash","crypto","subtle","digest","TextEncoder","encode","then","buffer","hexCodes","paddedValue","padding","stringValue","view","DataView","byteLength","getUint32","toString","slice","join","prop","delay","editing","timeoutEditor","clearTimeout","setTimeout","edit_value","update","on_save_success","on_save_fail","fail","Observables","property","extend","new_value","r","extenders","target","Encryptable","indexOf","l","encrypted_container","encrypted_editable","dencdata","encryption_key","encrypted_update","call","save_encrypted_container","encdata","HashedSave","hash_salt","log","LazyObservable","LazyObservableArray","initial_value","observableArray","select","utils","arrayFilter","map","arrayMap","pureComputed","write","deferEvaluation","init_value","make_array","_value","loaded","newValue","e","splice","args","refresh","Paginated","method","per_page","page","add_paginated_methods","collection","__page","__collection","count","parseInt","parseFloat","first_page","__reload","last_page","previous_page","next_page","pages","Relatable","relation_params","has_one","capitalize","has_many","selected","Sortable","move","to","sort","move_ui","targetIndex","String","charAt","toUpperCase","Modelize","sortable","hashed_index","has_data","ref6","ref7","ref8","param","isObservable"],"mappings":"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","sourcesContent":["var $, RESTConnector, object_merge,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\nif (typeof require === 'function') {\n  object_merge = require('./lib/utils');\n  $ = require('jquery');\n  window.jQuery = require('jquery');\n  require('../vendor/jquery.rest/dist/1/jquery.rest.min.js');\n}\n\nRESTConnector = (function() {\n  function RESTConnector(base, settings) {\n    var default_settings;\n    if (base == null) {\n      base = '/api/';\n    }\n    if (settings == null) {\n      settings = {};\n    }\n    this.init = bind(this.init, this);\n    this.get = bind(this.get, this);\n    default_settings = {\n      stripTrailingSlash: true,\n      methodOverride: true\n    };\n    settings = object_merge(settings, default_settings);\n    this.connector = new $.RestClient(base, settings);\n  }\n\n  RESTConnector.prototype.get = function(base_uri) {\n    return this.connector[base_uri];\n  };\n\n  RESTConnector.prototype.init = function(resource, sub_resources) {\n    var data, name, results;\n    if (sub_resources == null) {\n      sub_resources = [];\n    }\n    if (this.connector[resource] == null) {\n      this.connector.add(resource);\n    }\n    results = [];\n    for (name in sub_resources) {\n      data = sub_resources[name];\n      if (!this.connector[resource][name + 's']) {\n        results.push(this.connector[resource].add(name + 's'));\n      } else {\n        results.push(void 0);\n      }\n    }\n    return results;\n  };\n\n  return RESTConnector;\n\n})();\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = RESTConnector;\n}\n\n//# sourceMappingURL=connector.js.map\n","var Container;\n\nContainer = function(options) {\n  var container;\n  if (options == null) {\n    options = {};\n  }\n  'use strict';\n  container = function(self) {\n    var fn, index, name, ref, ref1, ref2, ref3, ref4;\n    if (self == null) {\n      self = {};\n    }\n    Observable(self, '__updated');\n    self.editables = function() {\n      var editables;\n      editables = [];\n      if (options.editable != null) {\n        editables = options.editable;\n      }\n      return editables;\n    };\n    if ((options.selectable != null) && options.selectable === true) {\n      Selectable(self);\n    }\n    if (options.observable != null) {\n      ref = options.observable;\n      for (index in ref) {\n        name = ref[index];\n        Observable(self, name);\n      }\n    }\n    if (options.editable != null) {\n      ref1 = options.editable;\n      for (index in ref1) {\n        name = ref1[index];\n        Editable(self, name, (function(_this) {\n          return function() {\n            return self.__updated(self[\"export\"]());\n          };\n        })(this));\n      }\n    }\n    if (options.computed != null) {\n      ref2 = options.computed;\n      for (name in ref2) {\n        fn = ref2[name];\n        Computed(self, name, fn);\n      }\n    }\n    if (options.purecomputed != null) {\n      ref3 = options.purecomputed;\n      for (name in ref3) {\n        fn = ref3[name];\n        PureComputed(self, name, fn);\n      }\n    }\n    if (options.functions != null) {\n      ref4 = options.functions;\n      for (name in ref4) {\n        fn = ref4[name];\n        self[name] = fn;\n      }\n    }\n    self[\"export\"] = (function(_this) {\n      return function() {\n        var data, ref5;\n        data = {};\n        if (options.editable != null) {\n          ref5 = options.editable;\n          for (index in ref5) {\n            name = ref5[index];\n            data[name] = self[name]();\n          }\n        }\n        return data;\n      };\n    })(this);\n    return self;\n  };\n  return container;\n};\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = Container;\n}\n\n//# sourceMappingURL=container.js.map\n","var decryptData, encryptData, generateKey, generateSalt, getHash;\n\ngenerateKey = function(password, salt) {\n  var hex, options;\n  if (password === '') {\n    throw new Error('Password for key generation empty!');\n  }\n  hex = sjcl.codec.hex.fromBits;\n  if (salt == null) {\n    salt = generateSalt();\n  }\n  options = {\n    salt: salt,\n    iter: 5000\n  };\n  options = sjcl.misc.cachedPbkdf2(password, options);\n  return sjcl.codec.hex.fromBits(options.key);\n};\n\ngenerateSalt = function(length) {\n  var rand;\n  if (length == null) {\n    length = 2;\n  }\n  rand = sjcl.random.randomWords(length);\n  return sjcl.codec.hex.fromBits(rand);\n};\n\nencryptData = function(key, data, adata) {\n  var options, options_ret;\n  if (adata == null) {\n    adata = '';\n  }\n  if (key === '') {\n    throw new Error('Encryption key empty!');\n  }\n  options = {\n    mode: 'gcm',\n    iter: 5000,\n    ts: 64,\n    ks: 256,\n    adata: adata\n  };\n  options_ret = {};\n  return sjcl.encrypt(key, data, options, options_ret);\n};\n\ndecryptData = function(key, data) {\n  var options_ret;\n  if (key === '') {\n    throw new Error('Decryption key empty!');\n  }\n  options_ret = {};\n  return sjcl.decrypt(key, data, {}, options_ret);\n};\n\ngetHash = function(value) {\n  var hash;\n  if (value == null) {\n    console.debug('Hash value empty');\n    value = '';\n  }\n  hash = sjcl.hash.sha256.hash(value);\n  return sjcl.codec.hex.fromBits(hash);\n};\n\n//# sourceMappingURL=crypto.js.map\n","var CryptoHandler, SJCLUtils, ko,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\nif (typeof require === 'function') {\n  ko = require('knockout');\n  SJCLUtils = require('../lib/sjcl');\n}\n\nCryptoHandler = (function() {\n  function CryptoHandler(settings) {\n    this.save = bind(this.save, this);\n    this.load = bind(this.load, this);\n    if (settings.key == null) {\n      throw new Error('Please provide an encryption key to the crypto handler!');\n    }\n    this.key = settings.key;\n    if (settings.salt != null) {\n      this.salt = settings.salt;\n    }\n  }\n\n  CryptoHandler.prototype.load = function(data) {\n    var decrypted_data;\n    decrypted_data = SJCLUtils.decryptData(this.key, data);\n    return JSON.parse(decrypted_data);\n  };\n\n  CryptoHandler.prototype.save = function(data) {\n    return SJCLUtils.encryptData(this.key, ko.toJSON(data));\n  };\n\n  return CryptoHandler;\n\n})();\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = CryptoHandler;\n}\n\n//# sourceMappingURL=crypto.js.map\n","var HashHandler,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\nHashHandler = (function() {\n  function HashHandler(settings) {\n    this.save = bind(this.save, this);\n    if (settings.salt == null) {\n      throw new Error('Please provide a salting hash to the hash handler!');\n    }\n    this.salt = settings.salt;\n  }\n\n  HashHandler.prototype.save = function(data) {\n    return getHash(data + this.salt);\n  };\n\n  return HashHandler;\n\n})();\n\n//# sourceMappingURL=hash.js.map\n","var JSONHandler;\n\nJSONHandler = (function() {\n  function JSONHandler() {}\n\n  JSONHandler.prototype.load = function(data) {\n    return JSON.parse(data);\n  };\n\n  JSONHandler.prototype.save = function(data) {\n    return JSON.stringify(data);\n  };\n\n  return JSONHandler;\n\n})();\n\n//# sourceMappingURL=json.js.map\n","var WebCryptoHandler, ko,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\nif (typeof require === 'function') {\n  ko = require('knockout');\n}\n\nWebCryptoHandler = (function() {\n  function WebCryptoHandler(settings) {\n    this.save = bind(this.save, this);\n    this.load = bind(this.load, this);\n    if (settings.key == null) {\n      throw new Error('Please provide an encryption key to the crypto handler!');\n    }\n    this.key = settings.key;\n    if (settings.salt != null) {\n      this.salt = settings.salt;\n    }\n  }\n\n  WebCryptoHandler.prototype.load = function(data) {\n    var decrypted_data;\n    decrypted_data = decryptData(this.key, data);\n    return JSON.parse(decrypted_data);\n  };\n\n  WebCryptoHandler.prototype.save = function(data) {\n    return encryptData(this.key, ko.toJSON(data));\n  };\n\n  return WebCryptoHandler;\n\n})();\n\n//# sourceMappingURL=webcrypto.js.map\n","var Ham;\n\nHam = function() {};\n\nHam.merge = function(a, b) {\n  var i, j, key, len, len1, ref, ref1, result;\n  result = {};\n  ref = Object.keys(a);\n  for (i = 0, len = ref.length; i < len; i++) {\n    key = ref[i];\n    result[key] = a[key];\n  }\n  ref1 = Object.keys(b);\n  for (j = 0, len1 = ref1.length; j < len1; j++) {\n    key = ref1[j];\n    if (a[key] == null) {\n      result[key] = b[key];\n    }\n  }\n  return result;\n};\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = Ham;\n}\n\n//# sourceMappingURL=ham.js.map\n","var Helpers;\n\nHelpers = {\n  relationship_fields: function(name, model, connector, options) {\n    if (options == null) {\n      options = {};\n    }\n    return [name + '_id', name + 's', name, window[model], connector, options];\n  },\n  single_get_fn: function(id_param, api_name, name, model, api, options) {\n    if (options == null) {\n      options = {};\n    }\n    return (function(_this) {\n      return function(callbackOrObservable) {\n        var callback;\n        callback = function(data) {\n          return _this[name](model(data));\n        };\n        if ((callbackOrObservable != null) && typeof callbackOrObservable['push'] === 'undefined') {\n          if (typeof callbackOrObservable !== 'function') {\n            throw new Error('model.find 2nd parameter needs to be either a function or a pushable object (Array, ObservableArray).\\nGiven: ' + callbackOrObservable);\n          }\n          callback = callbackOrObservable;\n        }\n        return model.get_one(_this[id_param](), callback);\n      };\n    })(this);\n  },\n  lazy_get_fn: function(id_param, api_name, name, model, api, options) {\n    var callback;\n    if (typeof callback === \"undefined\" || callback === null) {\n      callback = (function(_this) {\n        return function(data) {\n          var i, len, m, res;\n          res = [];\n          for (i = 0, len = data.length; i < len; i++) {\n            m = data[i];\n            res.push(model(m));\n          }\n          return _this[api_name](res);\n        };\n      })(this);\n      return api[api_name].read(this.id).done(callback);\n    }\n  },\n  lazy_single_get_fn: function(id_param, api_name, name, model, api, options) {\n    var callback;\n    if (typeof this[id_param] !== 'function') {\n      throw new Error('External key not an observable: ' + id_param);\n    }\n    if (this[id_param]() == null) {\n      throw new Error('Tried to access empty relation key: ' + id_param);\n    }\n    if (typeof this[id_param]() === 'function') {\n      throw new Error('Circular referene? Quitting.');\n    }\n    if (typeof callback === \"undefined\" || callback === null) {\n      callback = (function(_this) {\n        return function(data) {};\n      })(this);\n      this[name](model(data));\n    }\n    return model.get_one(this[id_param](), callback);\n  },\n  get_fn: function(id_param, api_name, name, model, api, options) {\n    if (options == null) {\n      options = {};\n    }\n    return (function(_this) {\n      return function(params, callbackOrObservable) {\n        var callback;\n        if (params == null) {\n          params = {};\n        }\n        callback = function(data) {\n          var i, len, m, res;\n          res = [];\n          for (i = 0, len = data.length; i < len; i++) {\n            m = data[i];\n            res.push(model(m));\n          }\n          return _this[api_name](res);\n        };\n        if ((callbackOrObservable != null) && typeof callbackOrObservable['push'] === 'undefined') {\n          if (typeof callbackOrObservable !== 'function') {\n            throw new Error('model.find 2nd parameter needs to be either a function or a pushable object (Array, ObservableArray).\\nGiven: ' + callbackOrObservable);\n          }\n          callback = callbackOrObservable;\n        }\n        if (api == null) {\n          throw new Error('No Connector found for resource \"' + api_name + '\" found: ', api);\n        }\n        if ((options.belongs_to != null) && options.belongs_to.length > 0) {\n          return api[api_name].read(options.belongs_to, _this.id, params).done(callback);\n        } else {\n          return api[api_name].read(_this.id, params).done(callback);\n        }\n      };\n    })(this);\n  },\n  create_fn: function(id_param, api_name, name, model, api, options) {\n    return (function(_this) {\n      return function(params, callbackOrObservable) {\n        var callback, m;\n        if (params == null) {\n          params = {};\n        }\n        callback = function(data) {\n          var m;\n          m = model(data);\n          if (m.after_create != null) {\n            m.after_create();\n          }\n          return _this[api_name].push(m);\n        };\n        if (callbackOrObservable != null) {\n          callback = function(data) {\n            var m;\n            m = model(JSON.parse(JSON.stringify(data)));\n            if (m.after_create != null) {\n              m.after_create();\n            }\n            return callbackOrObservable(data);\n          };\n        }\n        if (_this.id == null) {\n          throw new Error('Empty ID. Save parent model first!');\n        }\n        m = model(params);\n        if (m.before_create != null) {\n          m.before_create();\n        }\n        params = m[\"export\"](false, true);\n        if (api == null) {\n          throw new Error('No Connector found for resource \"' + api_name + '\" found: ', api);\n        }\n        if (options.belongs_to.length > 0) {\n          return api[api_name].create(options.belongs_to, _this.id, params).done(callback);\n        } else {\n          return api[api_name].create(_this.id, params).done(callback);\n        }\n      };\n    })(this);\n  },\n  destroy_fn: function(id_param, api_name, name, model, api, options) {\n    return (function(_this) {\n      return function(callback) {\n        if (callback == null) {\n          callback = function(data) {\n            return _this[api_name].remove(element);\n          };\n        }\n        if (_this.id == null) {\n          throw new Error('Empty ID. Save parent model first!');\n        }\n        api = connector.get(api_name);\n        if (options.belongs_to != null) {\n          return api[api_name].destroy(options.belongs_to, _this.id, id).done(callback);\n        } else {\n          return api[api_name].destroy(_this.id, id).done(callback);\n        }\n      };\n    })(this);\n  }\n};\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = Helpers;\n}\n\n//# sourceMappingURL=helpers.js.map\n","var Containable, init_multi_container, init_single_container;\n\nContainable = function(self, options) {\n  var container_fn, datahandler, field, first_class, name, ref, settings;\n  ref = options.container;\n  for (name in ref) {\n    settings = ref[name];\n    container_fn = window[name];\n    if (settings.container != null) {\n      container_fn = window[settings.container];\n    }\n    if ((settings.container != null) && typeof settings.container === 'function') {\n      container_fn = settings.container;\n    }\n    if (typeof container_fn !== 'function') {\n      throw new Error('No container \"' + name + '\" found.');\n    }\n    field = name.toLowerCase();\n    if (settings.field != null) {\n      field = settings.field;\n    }\n    if (typeof settings.datahandler !== 'object') {\n      throw new Error('Invalid or no datahandler provided for: \"' + name + '\"', typeof settings.datahandler);\n    }\n    if (settings.datahandler != null) {\n      datahandler = settings.datahandler;\n    }\n    first_class = false;\n    if (settings.first_class != null) {\n      first_class = settings.first_class;\n    }\n    if ((settings.type != null) && settings.type === 'multi') {\n      init_multi_container(self, name, datahandler, container_fn, field, options);\n    } else {\n      init_single_container(self, name, datahandler, container_fn, field, first_class, options);\n    }\n  }\n  return self;\n};\n\ninit_single_container = function(self, name, datahandler, container_fn, field, first_class, options) {\n  var data, editable, i, len, ref;\n  data = {};\n  if (self[field] != null) {\n    data = datahandler.load(self[field]);\n  }\n  Observable(self, name, new container_fn(data));\n  if (first_class === true) {\n    ref = self[name]().editables();\n    for (i = 0, len = ref.length; i < len; i++) {\n      editable = ref[i];\n      MappedObservable(self, editable, self[name](), self[editable]);\n    }\n  }\n  self[name]().__updated.subscribe((function(_this) {\n    return function(data) {\n      var callback;\n      callback = DelayedSave.apply(self, [options, self, datahandler]);\n      return callback(data, field);\n    };\n  })(this));\n  return self[name].subscribe((function(_this) {\n    return function() {\n      var callback;\n      callback = DelayedSave.apply(self, [options, self, datahandler]);\n      return callback(self[name](), field);\n    };\n  })(this));\n};\n\ninit_multi_container = (function(_this) {\n  return function(self, name, datahandler, container_fn, field, options) {\n    var c, data, i, item, items, len;\n    data = {};\n    if (self[field] != null) {\n      data = datahandler.load(self[field]);\n    }\n    items = [];\n    if (data != null) {\n      for (i = 0, len = data.length; i < len; i++) {\n        item = data[i];\n        c = new container_fn(item);\n        items.push(c);\n        c.__updated.subscribe(function() {\n          var callback;\n          callback = DelayedSave.apply(self, [options, self, datahandler]);\n          return callback(self[name](), field);\n        });\n      }\n    }\n    ObservableArray(self, name, items);\n    self[name + '_add'] = function(params, callback) {\n      if (params == null) {\n        params = {};\n      }\n      c = container_fn(params);\n      if (c.after_create != null) {\n        c.after_create();\n      }\n      if (c.before_create != null) {\n        c.before_create();\n      }\n      if (callback != null) {\n        callback(c);\n      }\n      params = c[\"export\"](false, true);\n      self[name].push(c);\n      return c.__updated.subscribe(function() {\n        callback = DelayedSave.apply(self, [options, self, datahandler]);\n        return callback(self[name](), field);\n      });\n    };\n    return self[name].subscribe(function() {\n      var callback;\n      callback = DelayedSave.apply(self, [options, self, datahandler]);\n      return callback(self[name](), field);\n    });\n  };\n})(this);\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = Containable;\n}\n\n//# sourceMappingURL=containable.js.map\n","var decryptData, encryptData, generateKey, generateSalt, getHash, getSHA256, hexHash;\n\ngenerateKey = function(password, salt) {\n  var hex, options;\n  if (password === '') {\n    throw new Error('Password for key generation empty!');\n  }\n  hex = sjcl.codec.hex.fromBits;\n  if (salt == null) {\n    salt = generateSalt();\n  }\n  options = {\n    salt: salt,\n    iter: 5000\n  };\n  options = sjcl.misc.cachedPbkdf2(password, options);\n  return sjcl.codec.hex.fromBits(options.key);\n};\n\ngenerateSalt = function(length) {\n  var rand;\n  if (length == null) {\n    length = 2;\n  }\n  rand = sjcl.random.randomWords(length);\n  return sjcl.codec.hex.fromBits(rand);\n};\n\nencryptData = function(key, data, adata) {\n  var options, options_ret;\n  if (adata == null) {\n    adata = '';\n  }\n  if (key === '') {\n    throw new Error('Encryption key empty!');\n  }\n  options = {\n    mode: 'gcm',\n    iter: 5000,\n    ts: 64,\n    ks: 256,\n    adata: adata\n  };\n  options_ret = {};\n  return sjcl.encrypt(key, data, options, options_ret);\n};\n\ndecryptData = function(key, data) {\n  var options_ret;\n  if (key === '') {\n    throw new Error('Decryption key empty!');\n  }\n  options_ret = {};\n  return sjcl.decrypt(key, data, {}, options_ret);\n};\n\ngetHash = function(value) {\n  var hash;\n  if (value == null) {\n    console.debug('Hash value empty');\n    value = '';\n  }\n  hash = sjcl.hash.sha256.hash(value);\n  return sjcl.codec.hex.fromBits(hash);\n};\n\ngetSHA256 = function(value) {\n  if (value == null) {\n    console.debug('Hash value empty');\n    value = '';\n  }\n  return crypto.subtle.digest(\"SHA-256\", new TextEncoder(\"utf-8\").encode(value)).then(function(hash) {\n    return hexHash(hash);\n  });\n};\n\nhexHash = function(buffer) {\n  var hexCodes, i, paddedValue, padding, stringValue, value, view;\n  hexCodes = [];\n  view = new DataView(buffer);\n  i = 0;\n  while (i < view.byteLength) {\n    value = view.getUint32(i);\n    stringValue = value.toString(16);\n    padding = '00000000';\n    paddedValue = (padding + stringValue).slice(-padding.length);\n    hexCodes.push(paddedValue);\n    i += 4;\n  }\n  return hexCodes.join(\"\");\n};\n\n//# sourceMappingURL=crypto.js.map\n","var DelayedSave;\n\nDelayedSave = function(options, self, datahandler) {\n  if (datahandler == null) {\n    datahandler = null;\n  }\n  return (function(_this) {\n    return function(value, prop, delay) {\n      if (delay == null) {\n        delay = 250;\n      }\n      if (self.id != null) {\n        if (self[prop] && (self[prop].editing != null)) {\n          self[prop].editing('pending');\n        }\n        if (window.timeoutEditor == null) {\n          window.timeoutEditor = {};\n        }\n        if (window.timeoutEditor[options.api + self.id] == null) {\n          window.timeoutEditor[options.api + self.id] = {};\n        }\n        clearTimeout(window.timeoutEditor[options.api + self.id][prop]);\n        return window.timeoutEditor[options.api + self.id][prop] = setTimeout(function() {\n          var edit_value, res;\n          if (self[prop] && (self[prop].editing != null)) {\n            self[prop].editing('success');\n          }\n          edit_value = {};\n          edit_value[prop] = value;\n          if (datahandler != null) {\n            edit_value[prop] = datahandler.save(value);\n          }\n          res = self.update(edit_value);\n          if (self.on_save_success != null) {\n            res.done(self.on_save_success);\n          }\n          if (self.on_save_fail != null) {\n            return res.fail(self.on_save_fail);\n          }\n        }, delay);\n      }\n    };\n  })(this);\n};\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = DelayedSave;\n}\n\n//# sourceMappingURL=delayedsave.js.map\n","var Editable, Observable, Observables, ko;\n\nif (typeof require === 'function') {\n  ko = require('knockout');\n  Observables = require('./observable');\n  Observable = Observables.Observable;\n}\n\nEditable = function(self, property, callback) {\n  Observable(self, property);\n  self[property].extend({\n    editable: \"\"\n  });\n  self[property].subscribe((function(_this) {\n    return function(new_value) {\n      var r;\n      return r = callback(new_value, property);\n    };\n  })(this));\n  return self;\n};\n\nko.extenders.editable = function(target, options) {\n  return target.editing = ko.observable('default');\n};\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = Editable;\n}\n\n//# sourceMappingURL=editable.js.map\n","var Encryptable,\n  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\nEncryptable = function(self, encrypted_container, encrypted_editable) {\n  var container, i, len;\n  self.decrypt = (function(_this) {\n    return function(encrypted_container) {\n      var dencdata, index, results, value;\n      if (self.encryption_key == null) {\n        throw new Error('No encryption key found! Pass it in the options hash as encryption.key');\n      }\n      if (typeof encrypted_container === 'string' && encrypted_container !== null && encrypted_container !== '') {\n        dencdata = decryptData(self.encryption_key, encrypted_container);\n        encrypted_container = JSON.parse(dencdata);\n        results = [];\n        for (index in encrypted_container) {\n          value = encrypted_container[index];\n          results.push(self[index] = value);\n        }\n        return results;\n      }\n    };\n  })(this);\n  if (typeof encrypted_container === 'string') {\n    self.decrypt(self[encrypted_container]);\n  } else if (typeof encrypted_container === 'object') {\n    for (i = 0, len = encrypted_container.length; i < len; i++) {\n      container = encrypted_container[i];\n      self.decrypt(self[container]);\n    }\n  }\n  self.encrypted_update = (function(_this) {\n    return function(data, callback) {\n      var index, value;\n      for (index in data) {\n        value = data[index];\n        if (indexOf.call(encrypted_editable, index) >= 0) {\n          if (typeof self[encrypted_container] !== 'object' || self[encrypted_container] === null) {\n            self[encrypted_container] = {};\n          }\n          self[encrypted_container][index] = value;\n        }\n      }\n      self.save_encrypted_container();\n      if (callback != null) {\n        return callback();\n      }\n    };\n  })(this);\n  self.save_encrypted_container = (function(_this) {\n    return function() {\n      var edit_value, encdata;\n      if (self.encryption_key == null) {\n        throw new Error('No encryption key found! Pass it in the options hash as encryption.key');\n      }\n      encdata = encryptData(self.encryption_key, JSON.stringify(self[encrypted_container]));\n      edit_value = {};\n      edit_value[encrypted_container] = encdata;\n      return self.update(edit_value);\n    };\n  })(this);\n  return self;\n};\n\n//# sourceMappingURL=encryptable.js.map\n","var HashedSave;\n\nHashedSave = function(options, self) {\n  return (function(_this) {\n    return function(value, prop) {\n      var edit_value, res;\n      if (self.id != null) {\n        if (self[prop] && (self[prop].editing != null)) {\n          self[prop].editing('pending');\n        }\n        if (self.hash_salt != null) {\n          value += self.hash_salt;\n        } else {\n          console.log('No salt for hash found. Intentional?');\n        }\n        edit_value = {};\n        edit_value[prop] = getHash(value);\n        res = self.update(edit_value);\n        if (self.on_save_success != null) {\n          res.done(self.on_save_success);\n        }\n        if (self.on_save_fail != null) {\n          return res.fail(self.on_save_fail);\n        }\n      }\n    };\n  })(this);\n};\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = HashedSave;\n}\n\n//# sourceMappingURL=hashedsave.js.map\n","var Computed, LazyObservable, LazyObservableArray, MappedObservable, Observable, ObservableArray, PureComputed, ko;\n\nif (typeof require === 'function') {\n  ko = require('knockout');\n}\n\nObservable = function(self, property, initial_value) {\n  if (initial_value === void 0) {\n    initial_value = self[property];\n  }\n  return self[property] = ko.observable(initial_value);\n};\n\nObservableArray = function(self, property, initial_value) {\n  if (initial_value === void 0) {\n    initial_value = [];\n  }\n  self[property] = ko.observableArray(initial_value);\n  self[property].select = function(fn) {\n    return ko.utils.arrayFilter(self[property].call(), fn);\n  };\n  return self[property].map = function(fn) {\n    return ko.utils.arrayMap(self[property].call(), fn);\n  };\n};\n\nComputed = function(self, property, fn) {\n  return self[property] = ko.computed(fn, self);\n};\n\nPureComputed = function(self, property, fn) {\n  return self[property] = ko.pureComputed(fn, self);\n};\n\nMappedObservable = function(self, property, container, initial_value) {\n  self[property] = ko.pureComputed({\n    read: function() {\n      return container[property]();\n    },\n    write: function(value) {\n      return container[property](value);\n    },\n    deferEvaluation: true\n  });\n  if (initial_value != null) {\n    return self[property](initial_value);\n  }\n};\n\nLazyObservable = function(self, property, callback, params, init_value, make_array) {\n  var _value;\n  if (params == null) {\n    params = [];\n  }\n  if (init_value == null) {\n    init_value = null;\n  }\n  if (make_array == null) {\n    make_array = false;\n  }\n  if (!make_array) {\n    _value = ko.observable(init_value);\n  } else {\n    _value = ko.observableArray(init_value);\n  }\n  self[property] = ko.computed({\n    read: function() {\n      if (self[property].loaded() === false) {\n        callback.apply(self, params);\n      }\n      return _value();\n    },\n    write: function(newValue) {\n      self[property].loaded(true);\n      return _value(newValue);\n    },\n    deferEvaluation: true\n  });\n  if (make_array === true) {\n    self[property].remove = function(e) {\n      return _value.remove(e);\n    };\n    self[property].push = function(e) {\n      return _value.push(e);\n    };\n    self[property].splice = function(e, i, args) {\n      return _value.splice(e, i, args);\n    };\n  }\n  self[property].loaded = ko.observable(false);\n  return self[property].refresh = function() {\n    return self[property].loaded(false);\n  };\n};\n\nLazyObservableArray = function(self, property, callback, params, init_value) {\n  if (params == null) {\n    params = [];\n  }\n  if (init_value == null) {\n    init_value = null;\n  }\n  return LazyObservable(self, property, callback, params, init_value, true);\n};\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = {\n    Observable: Observable,\n    ObservableArray: ObservableArray,\n    Computed: Computed,\n    PureComputed: PureComputed,\n    LazyObservable: LazyObservable\n  };\n}\n\n//# sourceMappingURL=observable.js.map\n","var Paginated;\n\nPaginated = function(self, options) {\n  if (!((self != null) && (options != null))) {\n    throw new Error('Error: no object or options given');\n  }\n  if ('object' !== typeof self) {\n    throw new Error('Error: first parameter is not an object');\n  }\n  if ('function' === typeof options) {\n    options = {\n      method: options\n    };\n  }\n  if ('object' !== typeof options) {\n    throw new Error('Invalid type for second parameter (' + typeof options + '), expected function or object');\n  }\n  options = object_merge(options, {\n    per_page: 20,\n    page: 0\n  });\n  if (options.page > 0) {\n    options.page--;\n  }\n  if (!(typeof options.per_page === 'number' && options.per_page > 0)) {\n    throw new Error('Invalid per_page value given');\n  }\n  if (options.method == null) {\n    throw new Error('No reload method given');\n  }\n  return Paginated.add_paginated_methods(self, options);\n};\n\nPaginated.add_paginated_methods = function(self, options) {\n  Observable(self, '__collection', options.collection);\n  Observable(self, '__reload', options.method);\n  Observable(self, '__page', options.page);\n  Observable(self, 'per_page', options.per_page);\n  Computed(self, 'page', (function(_this) {\n    return function() {\n      return self.__page() + 1;\n    };\n  })(this));\n  Computed(self, 'count', (function(_this) {\n    return function() {\n      if (self.__collection() != null) {\n        return self.__collection().count;\n      }\n      return 0;\n    };\n  })(this));\n  Computed(self, 'pages', (function(_this) {\n    return function() {\n      var result;\n      result = parseInt(parseFloat(self.count()) / parseFloat(self.__page()));\n      if (parseFloat(self.count()) % self.__page() > 0) {\n        result++;\n      }\n      return result;\n    };\n  })(this));\n  self.first_page = (function(_this) {\n    return function() {\n      self.__page(0);\n      return self.__collection(self.__reload());\n    };\n  })(this);\n  self.last_page = (function(_this) {\n    return function() {\n      self.__page(self.count() - 1);\n      return self.__collection(self.__reload());\n    };\n  })(this);\n  self.previous_page = (function(_this) {\n    return function() {\n      if (!(self.page() > 0)) {\n        return;\n      }\n      self.__page(self.page() - 1);\n      return self.__collection(self.__reload());\n    };\n  })(this);\n  return self.next_page = (function(_this) {\n    return function() {\n      if (!(self.page() + 1 < self.pages())) {\n        return;\n      }\n      self.__page(self.page() + 1);\n      return self.__collection(self.__reload());\n    };\n  })(this);\n};\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = Paginated;\n}\n\n//# sourceMappingURL=paginated.js.map\n","var Helpers, Observable, ObservableArray, Observables, Relatable, object_merge,\n  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\nif (typeof require === 'function') {\n  object_merge = require('./utils');\n  Helpers = require('../helpers');\n  Observables = require('./observable');\n  Observable = Observables.Observable;\n  ObservableArray = Observables.ObservableArray;\n}\n\nRelatable = function(self, options) {\n  var data, fn, i, item, items, len, name, ref, ref1, ref2, ref3, relation_params, results;\n  if (options.belongs_to != null) {\n    if (options.has_one == null) {\n      options.has_one = [];\n    }\n    options.has_one = object_merge(options.belongs_to, options.has_one);\n  } else {\n    options.belongs_to = [];\n  }\n  if (options.has_one != null) {\n    ref = options.has_one;\n    for (name in ref) {\n      data = ref[name];\n      object_merge(data, {\n        model: name.capitalize()\n      });\n      relation_params = Helpers.relationship_fields(name, data.model, self.api(), options);\n      fn = window[data.model];\n      if ((data.model != null) && typeof data.model === 'function') {\n        fn = data.model;\n      }\n      if (typeof fn !== 'function') {\n        console.debug('Relation model for \"' + name + '\" not a function: ', fn);\n        throw new Error('No model for has_one/belongs_to relation found');\n      }\n      if (typeof self[name + '_id'] !== 'function' && indexOf.call(options.belongs_to, name) < 0) {\n        if (options.editable == null) {\n          options.editable = [];\n        }\n        if (ref1 = name + '_id', indexOf.call(options.editable, ref1) < 0) {\n          options.editable.push(name + '_id');\n        }\n      }\n      if (self[name] != null) {\n        Observable(self, name, new fn(self[name]));\n      } else {\n        Observable(self, name, new fn());\n      }\n      self[name + '_get'] = Helpers.single_get_fn.apply(self, relation_params);\n    }\n  }\n  if (options.has_many != null) {\n    ref2 = options.has_many;\n    results = [];\n    for (name in ref2) {\n      data = ref2[name];\n      object_merge(data, {\n        model: name.capitalize()\n      });\n      relation_params = Helpers.relationship_fields(name, data.model, self.api(), options);\n      if (self[name + 's'] != null) {\n        fn = window[data.model];\n        items = [];\n        ref3 = self[name + 's'];\n        for (i = 0, len = ref3.length; i < len; i++) {\n          item = ref3[i];\n          items.push(new fn(item));\n        }\n        ObservableArray(self, name + 's', items);\n      } else {\n        ObservableArray(self, name + 's', []);\n      }\n      self[name + '_get'] = Helpers.get_fn.apply(self, relation_params);\n      self[name + '_add'] = Helpers.create_fn.apply(self, relation_params);\n      results.push(self[name + '_destroy'] = Helpers.destroy_fn.apply(self, relation_params));\n    }\n    return results;\n  }\n};\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = Relatable;\n}\n\n//# sourceMappingURL=relatable.js.map\n","var Selectable, ko;\n\nif (typeof require === 'function') {\n  ko = require('knockout');\n}\n\nSelectable = function(self) {\n  self.selected = ko.observable(false);\n  self.select = (function(_this) {\n    return function(item, element) {\n      return self.selected(!self.selected());\n    };\n  })(this);\n  return self;\n};\n\n//# sourceMappingURL=selectable.js.map\n","var SJCLUtils, sjcl;\n\nif (typeof require === 'function') {\n  sjcl = require('sjcl');\n}\n\nSJCLUtils = {\n  generateKey: function(password, salt) {\n    var hex, options;\n    if (password === '') {\n      throw new Error('Password for key generation empty!');\n    }\n    hex = sjcl.codec.hex.fromBits;\n    if (salt == null) {\n      salt = SJCLUtils.generateSalt();\n    }\n    options = {\n      salt: salt,\n      iter: 5000\n    };\n    options = sjcl.misc.cachedPbkdf2(password, options);\n    return sjcl.codec.hex.fromBits(options.key);\n  },\n  generateSalt: function(length) {\n    var rand;\n    if (length == null) {\n      length = 2;\n    }\n    rand = sjcl.random.randomWords(length);\n    return sjcl.codec.hex.fromBits(rand);\n  },\n  encryptData: function(key, data, adata) {\n    var options, options_ret;\n    if (adata == null) {\n      adata = '';\n    }\n    if (key === '') {\n      throw new Error('Encryption key empty!');\n    }\n    options = {\n      mode: 'gcm',\n      iter: 5000,\n      ts: 64,\n      ks: 256,\n      adata: adata\n    };\n    options_ret = {};\n    return sjcl.encrypt(key, data, options, options_ret);\n  },\n  decryptData: function(key, data) {\n    var options_ret;\n    if (key === '') {\n      throw new Error('Decryption key empty!');\n    }\n    options_ret = {};\n    return sjcl.decrypt(key, data, {}, options_ret);\n  },\n  getHash: function(value) {\n    var hash;\n    if (value == null) {\n      console.debug('Hash value empty');\n      value = '';\n    }\n    hash = sjcl.hash.sha256.hash(value);\n    return sjcl.codec.hex.fromBits(hash);\n  }\n};\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = SJCLUtils;\n}\n\n//# sourceMappingURL=sjcl.js.map\n","var Sortable;\n\nSortable = function(self) {\n  self.move = (function(_this) {\n    return function(to, callback) {\n      return self.update({\n        sort: to\n      }, callback);\n    };\n  })(this);\n  self.move_ui = (function(_this) {\n    return function(element) {\n      var item, to;\n      item = element.item;\n      to = element.targetIndex;\n      return item.update({\n        sort: to\n      });\n    };\n  })(this);\n  return self;\n};\n\n//# sourceMappingURL=sortable.js.map\n","var object_merge;\n\nString.prototype.capitalize = function() {\n  return this.charAt(0).toUpperCase() + this.slice(1);\n};\n\nobject_merge = function(a, b) {\n  var i, j, key, len, len1, ref, ref1, result;\n  result = {};\n  ref = Object.keys(a);\n  for (i = 0, len = ref.length; i < len; i++) {\n    key = ref[i];\n    result[key] = a[key];\n  }\n  ref1 = Object.keys(b);\n  for (j = 0, len1 = ref1.length; j < len1; j++) {\n    key = ref1[j];\n    if (a[key] == null) {\n      result[key] = b[key];\n    }\n  }\n  return result;\n};\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = object_merge;\n}\n\n//# sourceMappingURL=utils.js.map\n","var getSHA256, hexHash;\n\ngetSHA256 = function(value) {\n  if (value == null) {\n    console.debug('Hash value empty');\n    value = '';\n  }\n  return crypto.subtle.digest(\"SHA-256\", new TextEncoder(\"utf-8\").encode(value)).then(function(hash) {\n    return hexHash(hash);\n  });\n};\n\nhexHash = function(buffer) {\n  var hexCodes, i, paddedValue, padding, stringValue, value, view;\n  hexCodes = [];\n  view = new DataView(buffer);\n  i = 0;\n  while (i < view.byteLength) {\n    value = view.getUint32(i);\n    stringValue = value.toString(16);\n    padding = '00000000';\n    paddedValue = (padding + stringValue).slice(-padding.length);\n    hexCodes.push(paddedValue);\n    i += 4;\n  }\n  return hexCodes.join(\"\");\n};\n\n//# sourceMappingURL=webcrypto.js.map\n","var Computed, Containable, DelayedSave, Editable, HashedSave, Modelize, Observable, Observables, PureComputed, Relatable, ko, object_merge,\n  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\nif (typeof require === 'function') {\n  ko = require('knockout');\n  object_merge = require('./lib/utils');\n  Observables = require('./lib/observable');\n  Observable = Observables.Observable;\n  Computed = Observables.Computed;\n  PureComputed = Observables.PureComputed;\n  Relatable = require('./lib/relatable');\n  Containable = require('./lib/containable');\n  Editable = require('./lib/editable');\n  DelayedSave = require('./lib/delayedsave');\n  HashedSave = require('./lib/hashedsave');\n}\n\nModelize = function(options) {\n  'use strict';\n  var connector, model, sub_resources;\n  if (options.connector == null) {\n    throw new Error('No connector given for API URI: ' + options.api);\n  }\n  sub_resources = [];\n  if (options.has_one != null) {\n    sub_resources = object_merge(sub_resources, options.has_one);\n  }\n  if (options.has_many != null) {\n    sub_resources = object_merge(sub_resources, options.has_many);\n  }\n  options.connector.init(options.api, sub_resources);\n  connector = options.connector.get(options.api);\n  model = function(self) {\n    var fn, index, name, ref, ref1, ref2, ref3, ref4, ref5;\n    if (self == null) {\n      self = {};\n    }\n    self.api = function() {\n      return connector;\n    };\n    if (options.hash_salt != null) {\n      self.hash_salt = options.hash_salt;\n    }\n    if ((options.sortable != null) && options.sortable === true) {\n      Sortable(self);\n    }\n    if ((options.selectable != null) && options.selectable === true) {\n      Selectable(self);\n    }\n    if ((options.has_one != null) || (options.has_many != null) || (options.belongs_to != null)) {\n      Relatable(self, options);\n    }\n    if (options.container != null) {\n      Containable(self, options);\n    }\n    if (options.observable != null) {\n      ref = options.observable;\n      for (index in ref) {\n        name = ref[index];\n        Observable(self, name);\n      }\n    }\n    if (options.editable != null) {\n      ref1 = options.editable;\n      for (index in ref1) {\n        name = ref1[index];\n        Editable(self, name, DelayedSave.apply(self, [options, self]));\n      }\n    }\n    if (options.hashed_index != null) {\n      ref2 = options.hashed_index;\n      for (index in ref2) {\n        name = ref2[index];\n        Editable(self, name, HashedSave.apply(self, [options, self]));\n      }\n    }\n    if (options.computed != null) {\n      ref3 = options.computed;\n      for (name in ref3) {\n        fn = ref3[name];\n        Computed(self, name, fn);\n      }\n    }\n    if (options.purecomputed != null) {\n      ref4 = options.purecomputed;\n      for (name in ref4) {\n        fn = ref4[name];\n        PureComputed(self, name, fn);\n      }\n    }\n    if (options.functions != null) {\n      ref5 = options.functions;\n      for (name in ref5) {\n        fn = ref5[name];\n        self[name] = fn;\n      }\n    }\n    self.update = (function(_this) {\n      return function(params, callback) {\n        if (self.id == null) {\n          throw new Error('Trying to update nonexisting model object');\n        }\n        return self.api().update(self.id, params).done(callback);\n      };\n    })(this);\n    self.destroy = (function(_this) {\n      return function(callback) {\n        if (self.id == null) {\n          throw new Error('Trying to delete nonexisting model object');\n        }\n        return self.api().destroy(self.id).done(callback);\n      };\n    })(this);\n    self.create = (function(_this) {\n      return function(callback) {\n        return self.api().create(self[\"export\"](false, true)).done(function(data) {\n          self.id = data.id;\n          return callback();\n        });\n      };\n    })(this);\n    self[\"export\"] = (function(_this) {\n      return function(id, datahandler) {\n        var data, field, has_data, ref6, ref7, ref8, settings;\n        if (id == null) {\n          id = false;\n        }\n        if (datahandler == null) {\n          datahandler = false;\n        }\n        data = {};\n        if (id === true) {\n          data['id'] = self['id'];\n        }\n        if (options.editable != null) {\n          ref6 = options.editable;\n          for (index in ref6) {\n            name = ref6[index];\n            data[name] = self[name]();\n          }\n        }\n        if (options.belongs_to != null) {\n          ref7 = options.belongs_to;\n          for (name in ref7) {\n            has_data = ref7[name];\n            data[name + '_id'] = self[name + '_id']();\n          }\n        }\n        if (options.container != null) {\n          ref8 = options.container;\n          for (name in ref8) {\n            settings = ref8[name];\n            if (datahandler) {\n              field = name.toLowerCase();\n              if (settings.field != null) {\n                field = settings.field;\n              }\n              if (settings.datahandler != null) {\n                datahandler = settings.datahandler;\n              }\n              if (settings.datahandler == null) {\n                datahandler = new JSONHandler();\n              }\n              data[field] = datahandler.save(self[name]());\n            } else {\n              data[name] = ko.toJSON(self[name]());\n            }\n          }\n        }\n        return data;\n      };\n    })(this);\n    return self;\n  };\n\n  /*\n   * These are the collection functions and are not bound to a specific object but to the model\n   */\n  model.get = function(params, callbackOrObservable) {\n    var callback, param, salt;\n    if (params == null) {\n      params = {};\n    }\n    callback = function(data) {\n      var i, len, m, results;\n      results = [];\n      for (i = 0, len = data.length; i < len; i++) {\n        m = data[i];\n        results.push(callbackOrObservable.push(model(m)));\n      }\n      return results;\n    };\n    if (typeof callbackOrObservable['push'] === 'undefined') {\n      if (typeof callbackOrObservable !== 'function') {\n        throw new Error('Collection.get 2nd parameter needs to be either a function or a pushable object (Array, ObservableArray).\\nGiven: ' + callbackOrObservable);\n      }\n      callback = callbackOrObservable;\n    }\n    if (typeof params !== 'object') {\n      throw new Error('Passed params is not an object: ' + typeof params);\n    }\n    if ((options.hashed_index != null) && (params != null)) {\n      salt = '';\n      if (options.hash_salt != null) {\n        salt = options.hash_salt;\n      }\n      for (param in params) {\n        if (indexOf.call(options.hashed_index, param) >= 0) {\n          params[param] = getHash(params[param] + salt);\n        }\n      }\n    }\n    if ((params != null) && (params.id != null)) {\n      connector.read(params.id, params).done(callback);\n    } else {\n      connector.read(params).done(callback);\n    }\n  };\n  model.get_one = function(id, callbackOrObservable) {\n    var callback;\n    callback = function(data) {\n      return callbackOrObservable(model(data));\n    };\n    if (ko.isObservable(callbackOrObservable) === false) {\n      if (typeof callbackOrObservable !== 'function') {\n        throw new Error('Collection.get_one 2nd parameter needs to be either a function or an Observable.\\nGiven: ' + callbackOrObservable);\n      }\n      callback = callbackOrObservable;\n    }\n    return model.get({\n      id: id\n    }, callback);\n  };\n  model.create = function(params, callbackOrObservable) {\n    var callback, m;\n    if (params == null) {\n      params = {};\n    }\n    callback = function(data) {\n      return callbackOrObservable.push(model(data));\n    };\n    if (typeof callbackOrObservable['push'] === 'undefined') {\n      if (typeof callbackOrObservable !== 'function') {\n        throw new Error('Collection.create 2nd parameter needs to be either a function or a pushable object (Array, ObservableArray).\\nGiven: ' + callbackOrObservable);\n      }\n      callback = (function(_this) {\n        return function(data) {\n          var m;\n          m = model(JSON.parse(JSON.stringify(data)));\n          if (m.after_create != null) {\n            m.after_create();\n          }\n          return callbackOrObservable(data);\n        };\n      })(this);\n    }\n    m = model(params);\n    if (m.before_create != null) {\n      m.before_create();\n    }\n    params = m[\"export\"](false, true);\n    return connector.create(params).done(callback);\n  };\n  return model;\n};\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = Modelize;\n}\n\n//# sourceMappingURL=model.js.map\n"]}